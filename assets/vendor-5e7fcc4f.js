import{R as e,r as t}from"./vendor-react-51ceb2e1.js";function n(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var o=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a="-ms-",c="-moz-",u="-webkit-",l="comm",d="rule",h="decl",p="@keyframes",f=Math.abs,g=String.fromCharCode,m=Object.assign;function _(e){return e.trim()}function y(e,t,n){return e.replace(t,n)}function v(e,t){return e.indexOf(t)}function b(e,t){return 0|e.charCodeAt(t)}function w(e,t,n){return e.slice(t,n)}function S(e){return e.length}function x(e){return e.length}function T(e,t){return t.push(e),e}var k=1,E=1,O=0,C=0,P=0,R="";function I(e,t,n,r,s,i,o){return{value:e,root:t,parent:n,type:r,props:s,children:i,line:k,column:E,length:o,return:""}}function $(e,t){return m(I("",null,null,"",null,null,0),e,{length:-e.length},t)}function A(){return P=C>0?b(R,--C):0,E--,10===P&&(E=1,k--),P}function j(){return P=C<O?b(R,C++):0,E++,10===P&&(E=1,k++),P}function D(){return b(R,C)}function N(){return C}function L(e,t){return w(R,e,t)}function M(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function U(e){return k=E=1,O=S(R=e),C=0,[]}function B(e){return R="",e}function q(e){return _(L(C-1,z(91===e?e+2:40===e?e+1:e)))}function F(e){for(;(P=D())&&P<33;)j();return M(e)>2||M(P)>3?"":" "}function H(e,t){for(;--t&&j()&&!(P<48||P>102||P>57&&P<65||P>70&&P<97););return L(e,N()+(t<6&&32==D()&&32==j()))}function z(e){for(;j();)switch(P){case e:return C;case 34:case 39:34!==e&&39!==e&&z(P);break;case 40:41===e&&z(e);break;case 92:j()}return C}function W(e,t){for(;j()&&e+P!==57&&(e+P!==84||47!==D()););return"/*"+L(t,C-1)+"*"+g(47===e?e:j())}function G(e){for(;!M(D());)j();return L(e,C)}function J(e){return B(V("",null,null,null,[""],e=U(e),0,[0],e))}function V(e,t,n,r,s,i,o,a,c){for(var u=0,l=0,d=o,h=0,p=0,f=0,m=1,_=1,w=1,x=0,k="",E=s,O=i,C=r,P=k;_;)switch(f=x,x=j()){case 40:if(108!=f&&58==b(P,d-1)){-1!=v(P+=y(q(x),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:P+=q(x);break;case 9:case 10:case 13:case 32:P+=F(f);break;case 92:P+=H(N()-1,7);continue;case 47:switch(D()){case 42:case 47:T(Y(W(j(),N()),t,n),c);break;default:P+="/"}break;case 123*m:a[u++]=S(P)*w;case 125*m:case 59:case 0:switch(x){case 0:case 125:_=0;case 59+l:-1==w&&(P=y(P,/\f/g,"")),p>0&&S(P)-d&&T(p>32?X(P+";",r,n,d-1):X(y(P," ","")+";",r,n,d-2),c);break;case 59:P+=";";default:if(T(C=K(P,t,n,u,l,s,a,k,E=[],O=[],d),i),123===x)if(0===l)V(P,t,C,C,E,i,d,a,O);else switch(99===h&&110===b(P,3)?100:h){case 100:case 108:case 109:case 115:V(e,C,C,r&&T(K(e,C,C,0,0,s,a,k,s,E=[],d),O),s,O,d,a,r?E:O);break;default:V(P,C,C,C,[""],O,0,a,O)}}u=l=p=0,m=w=1,k=P="",d=o;break;case 58:d=1+S(P),p=f;default:if(m<1)if(123==x)--m;else if(125==x&&0==m++&&125==A())continue;switch(P+=g(x),x*m){case 38:w=l>0?1:(P+="\f",-1);break;case 44:a[u++]=(S(P)-1)*w,w=1;break;case 64:45===D()&&(P+=q(j())),h=D(),l=d=S(k=P+=G(N())),x++;break;case 45:45===f&&2==S(P)&&(m=0)}}return i}function K(e,t,n,r,s,i,o,a,c,u,l){for(var h=s-1,p=0===s?i:[""],g=x(p),m=0,v=0,b=0;m<r;++m)for(var S=0,T=w(e,h+1,h=f(v=o[m])),k=e;S<g;++S)(k=_(v>0?p[S]+" "+T:y(T,/&\f/g,p[S])))&&(c[b++]=k);return I(e,t,n,0===s?d:a,c,u,l)}function Y(e,t,n){return I(e,t,n,l,g(P),w(e,2,-2),0)}function X(e,t,n,r){return I(e,t,n,h,w(e,0,r),w(e,r+1,-1),r)}function Q(e,t){for(var n="",r=x(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function Z(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case h:return e.return=e.return||e.value;case l:return"";case p:return e.return=e.value+"{"+Q(e.children,r)+"}";case d:e.value=e.props.join(",")}return S(n=Q(e.children,r))?e.return=e.value+"{"+n+"}":""}function ee(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var te=function(e,t,n){for(var r=0,s=0;r=s,s=D(),38===r&&12===s&&(t[n]=1),!M(s);)j();return L(e,C)},ne=function(e,t){return B(function(e,t){var n=-1,r=44;do{switch(M(r)){case 0:38===r&&12===D()&&(t[n]=1),e[n]+=te(C-1,t,n);break;case 2:e[n]+=q(r);break;case 4:if(44===r){e[++n]=58===D()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=g(r)}}while(r=j());return e}(U(e),t))},re=new WeakMap,se=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||re.get(n))&&!r){re.set(e,!0);for(var s=[],i=ne(t,s),o=n.props,a=0,c=0;a<i.length;a++)for(var u=0;u<o.length;u++,c++)e.props[c]=s[a]?i[a].replace(/&\f/g,o[u]):o[u]+" "+i[a]}}},ie=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function oe(e,t){switch(function(e,t){return 45^b(e,0)?(((t<<2^b(e,0))<<2^b(e,1))<<2^b(e,2))<<2^b(e,3):0}(e,t)){case 5103:return u+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return u+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return u+e+c+e+a+e+e;case 6828:case 4268:return u+e+a+e+e;case 6165:return u+e+a+"flex-"+e+e;case 5187:return u+e+y(e,/(\w+).+(:[^]+)/,u+"box-$1$2"+a+"flex-$1$2")+e;case 5443:return u+e+a+"flex-item-"+y(e,/flex-|-self/,"")+e;case 4675:return u+e+a+"flex-line-pack"+y(e,/align-content|flex-|-self/,"")+e;case 5548:return u+e+a+y(e,"shrink","negative")+e;case 5292:return u+e+a+y(e,"basis","preferred-size")+e;case 6060:return u+"box-"+y(e,"-grow","")+u+e+a+y(e,"grow","positive")+e;case 4554:return u+y(e,/([^-])(transform)/g,"$1"+u+"$2")+e;case 6187:return y(y(y(e,/(zoom-|grab)/,u+"$1"),/(image-set)/,u+"$1"),e,"")+e;case 5495:case 3959:return y(e,/(image-set\([^]*)/,u+"$1$`$1");case 4968:return y(y(e,/(.+:)(flex-)?(.*)/,u+"box-pack:$3"+a+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+u+e+e;case 4095:case 3583:case 4068:case 2532:return y(e,/(.+)-inline(.+)/,u+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(S(e)-1-t>6)switch(b(e,t+1)){case 109:if(45!==b(e,t+4))break;case 102:return y(e,/(.+:)(.+)-([^]+)/,"$1"+u+"$2-$3$1"+c+(108==b(e,t+3)?"$3":"$2-$3"))+e;case 115:return~v(e,"stretch")?oe(y(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==b(e,t+1))break;case 6444:switch(b(e,S(e)-3-(~v(e,"!important")&&10))){case 107:return y(e,":",":"+u)+e;case 101:return y(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+u+(45===b(e,14)?"inline-":"")+"box$3$1"+u+"$2$3$1"+a+"$2box$3")+e}break;case 5936:switch(b(e,t+11)){case 114:return u+e+a+y(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return u+e+a+y(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return u+e+a+y(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return u+e+a+e+e}return e}var ae=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case h:e.return=oe(e.value,e.length);break;case p:return Q([$(e,{value:y(e.value,"@","@"+u)})],r);case d:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Q([$(e,{props:[y(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Q([$(e,{props:[y(t,/:(plac\w+)/,":"+u+"input-$1")]}),$(e,{props:[y(t,/:(plac\w+)/,":-moz-$1")]}),$(e,{props:[y(t,/:(plac\w+)/,a+"input-$1")]})],r)}return""}))}}],ce=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,s,i=e.stylisPlugins||ae,a={},c=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;c.push(e)}));var u,l,d=[Z,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],h=function(e){var t=x(e);return function(n,r,s,i){for(var o="",a=0;a<t;a++)o+=e[a](n,r,s,i)||"";return o}}([se,ie].concat(i,d));s=function(e,t,n,r){u=n,Q(J(e?e+"{"+t.styles+"}":t.styles),h),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new o({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return p.sheet.hydrate(c),p};function ue(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var le=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},de=function(e,t,n){le(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}};var he={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pe=/[A-Z]|^ms/g,fe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ge=function(e){return 45===e.charCodeAt(1)},me=function(e){return null!=e&&"boolean"!=typeof e},_e=ee((function(e){return ge(e)?e:e.replace(pe,"-$&").toLowerCase()})),ye=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(fe,(function(e,t,n){return be={name:t,styles:n,next:be},t}))}return 1===he[e]||ge(e)||"number"!=typeof t||0===t?t:t+"px"};function ve(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var s=n;if(1===s.anim)return be={name:s.name,styles:s.styles,next:be},s.name;var i=n;if(void 0!==i.styles){var o=i.next;if(void 0!==o)for(;void 0!==o;)be={name:o.name,styles:o.styles,next:be},o=o.next;return i.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=ve(e,t,n[s])+";";else for(var i in n){var o=n[i];if("object"!=typeof o){var a=o;null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":me(a)&&(r+=_e(i)+":"+ye(i,a)+";")}else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var c=ve(e,t,o);switch(i){case"animation":case"animationName":r+=_e(i)+":"+c+";";break;default:r+=i+"{"+c+"}"}}else for(var u=0;u<o.length;u++)me(o[u])&&(r+=_e(i)+":"+ye(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=be,c=n(e);return be=a,ve(e,t,c)}}var u=n;if(null==t)return u;var l=t[u];return void 0!==l?l:u}var be,we=/label:\s*([^\s;{]+)\s*(;|$)/g;function Se(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,s="";be=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,s+=ve(n,t,i)):s+=i[0];for(var o=1;o<e.length;o++){if(s+=ve(n,t,e[o]),r)s+=i[o]}we.lastIndex=0;for(var a,c="";null!==(a=we.exec(s));)c+="-"+a[1];var u=function(e){for(var t,n=0,r=0,s=e.length;s>=4;++r,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(s){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(s)+c;return{name:u,styles:s,next:be}}var xe=!!e.useInsertionEffect&&e.useInsertionEffect||function(e){return e()},Te={exports:{}},ke={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],u=a+1,l=e[u];if(0>s(c,n))u<i&&0>s(l,c)?(e[r]=l,e[u]=n,r=u):(e[r]=c,e[a]=n,r=a);else{if(!(u<i&&0>s(l,n)))break e;e[r]=l,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],l=1,d=null,h=3,p=!1,f=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var s=n(u);null!==s;){if(null===s.callback)r(u);else{if(!(s.startTime<=e))break;r(u),s.sortIndex=s.expirationTime,t(c,s)}s=n(u)}}function b(e){if(g=!1,v(e),!f)if(null!==n(c))f=!0,$(w);else{var t=n(u);null!==t&&A(b,t.startTime-e)}}function w(t,s){f=!1,g&&(g=!1,_(k),k=-1),p=!0;var i=h;try{for(v(s),d=n(c);null!==d&&(!(d.expirationTime>s)||t&&!C());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var a=o(d.expirationTime<=s);s=e.unstable_now(),"function"==typeof a?d.callback=a:d===n(c)&&r(c),v(s)}else r(c);d=n(c)}if(null!==d)var l=!0;else{var m=n(u);null!==m&&A(b,m.startTime-s),l=!1}return l}finally{d=null,h=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,T=null,k=-1,E=5,O=-1;function C(){return!(e.unstable_now()-O<E)}function P(){if(null!==T){var t=e.unstable_now();O=t;var n=!0;try{n=T(!0,t)}finally{n?S():(x=!1,T=null)}}else x=!1}if("function"==typeof y)S=function(){y(P)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=P,S=function(){I.postMessage(null)}}else S=function(){m(P,0)};function $(e){T=e,x||(x=!0,S())}function A(t,n){k=m((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,$(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(E=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,i){var o=e.unstable_now();switch("object"==typeof i&&null!==i?i="number"==typeof(i=i.delay)&&0<i?o+i:o:i=o,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:l++,callback:s,priorityLevel:r,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(r.sortIndex=i,t(u,r),null===n(c)&&r===n(u)&&(g?(_(k),k=-1):g=!0,A(b,i-o))):(r.sortIndex=a,t(c,r),f||p||(f=!0,$(w))),r},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(ke),Te.exports=ke;var Ee=Te.exports;const Oe=s((function(e,t,n,r,s,i,o,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,s,i,o,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}));const Ce=s((function(e,t,n,r){var s=n?n.call(r,e,t):void 0;if(void 0!==s)return!!s;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<i.length;c++){var u=i[c];if(!a(u))return!1;var l=e[u],d=t[u];if(!1===(s=n?n.call(r,l,d,u):void 0)||void 0===s&&l!==d)return!1}return!0}));
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}var Re;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Re||(Re={}));const Ie="popstate";function $e(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Re.Pop,c=null,u=l();null==u&&(u=0,o.replaceState(Pe({},o.state,{idx:u}),""));function l(){return(o.state||{idx:null}).idx}function d(){a=Re.Pop;let e=l(),t=null==e?null:e-u;u=e,c&&c({action:a,location:g.location,delta:t})}function h(e,t){a=Re.Push;let r=Ne(g.location,e,t);n&&n(r,e),u=l()+1;let d=De(r,u),h=g.createHref(r);try{o.pushState(d,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(h)}i&&c&&c({action:a,location:g.location,delta:1})}function p(e,t){a=Re.Replace;let r=Ne(g.location,e,t);n&&n(r,e),u=l();let s=De(r,u),d=g.createHref(r);o.replaceState(s,"",d),i&&c&&c({action:a,location:g.location,delta:0})}function f(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"==typeof e?e:Le(e);return n=n.replace(/ $/,"%20"),Ae(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}let g={get action(){return a},get location(){return e(s,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ie,d),c=e,()=>{s.removeEventListener(Ie,d),c=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>o.go(e)};return g}((function(e,t){let{pathname:n="/",search:r="",hash:s=""}=Me(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),Ne("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"==typeof t?t:Le(t))}),(function(e,t){je("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}function Ae(e,t){if(!1===e||null==e)throw new Error(t)}function je(e,t){if(!e)try{throw new Error(t)}catch(n){}}function De(e,t){return{usr:e.state,key:e.key,idx:t}}function Ne(e,t,n,r){return void 0===n&&(n=null),Pe({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Me(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Le(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Me(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Ue;function Be(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let s="string"==typeof t?Me(t):t,i=et(s.pathname||"/",n);if(null==i)return null;let o=qe(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let c=0;null==a&&c<o.length;++c){let e=Ze(i);a=Xe(o[c],e,r)}return a}(e,t,n,!1)}function qe(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(Ae(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=st([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(Ae(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),qe(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:Ye(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Fe(e.path))s(e,t,r);else s(e,t)})),t}function Fe(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let o=Fe(r.join("/")),a=[];return a.push(...o.map((e=>""===e?i:[i,e].join("/")))),s&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Ue||(Ue={}));const He=/^:[\w-]+$/,ze=3,We=2,Ge=1,Je=10,Ve=-2,Ke=e=>"*"===e;function Ye(e,t){let n=e.split("/"),r=n.length;return n.some(Ke)&&(r+=Ve),t&&(r+=We),n.filter((e=>!Ke(e))).reduce(((e,t)=>e+(He.test(t)?ze:""===t?Ge:Je)),r)}function Xe(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],c=a===r.length-1,u="/"===i?t:t.slice(i.length)||"/",l=Qe({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},u),d=e.route;if(!l&&c&&n&&!r[r.length-1].route.index&&(l=Qe({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!l)return null;Object.assign(s,l.params),o.push({params:s,pathname:st([i,l.pathname]),pathnameBase:it(st([i,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(i=st([i,l.pathnameBase]))}return o}function Qe(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);je("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=a[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=s&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:o,pattern:e}}function Ze(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return je(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function et(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function tt(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function nt(e,t){let n=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function rt(e,t,n,r){let s;void 0===r&&(r=!1),"string"==typeof e?s=Me(e):(s=Pe({},e),Ae(!s.pathname||!s.pathname.includes("?"),tt("?","pathname","search",s)),Ae(!s.pathname||!s.pathname.includes("#"),tt("#","pathname","hash",s)),Ae(!s.search||!s.search.includes("#"),tt("#","search","hash",s)));let i,o=""===e||""===s.pathname,a=o?"/":s.pathname;if(null==a)i=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"==typeof e?Me(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:ot(r),hash:at(s)}}(s,i),u=a&&"/"!==a&&a.endsWith("/"),l=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!l||(c.pathname+="/"),c}const st=e=>e.join("/").replace(/\/\/+/g,"/"),it=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ot=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",at=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ct(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const ut=["post","put","patch","delete"];new Set(ut);const lt=["get",...ut];function dt(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=dt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ht(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=dt(e))&&(r&&(r+=" "),r+=t);return r}new Set(lt);const pt=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ft=ht,gt=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return ft(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map((e=>{const t=null==n?void 0:n[e],r=null==i?void 0:i[e];if(null===t)return null;const o=pt(t)||pt(r);return s[e][o]})),a=n&&Object.entries(n).reduce(((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e}),{}),c=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce(((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every((e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...i,...a}[t]):{...i,...a}[t]===n}))?[...e,n,r]:e}),[]);return ft(e,o,c,null==n?void 0:n.class,null==n?void 0:n.className)};function mt(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=_t(e))&&(r&&(r+=" "),r+=t);return r}function _t(e){if("string"==typeof e)return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=_t(e[r]))&&(n&&(n+=" "),n+=t);return n}function yt(e){var t=function(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},s=function(e,t){if(!t)return e;return e.map((function(e){return[e[0],e[1].map((function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map((function(e){var n=e[0],r=e[1];return[t+n,r]}))):e}))]}))}(Object.entries(e.classGroups),n);return s.forEach((function(e){var n=e[0];wt(e[1],r,n,t)})),r}(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,s=void 0===r?{}:r;return{getClassGroupId:function(e){var n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),vt(n,t)||function(e){if(bt.test(e)){var t=bt.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}(e)},getConflictingClassGroupIds:function(e,t){var r=n[e]||[];return t&&s[e]?[].concat(r,s[e]):r}}}function vt(e,t){if(0===e.length)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),s=r?vt(e.slice(1),r):void 0;if(s)return s;if(0!==t.validators.length){var i=e.join("-");return t.validators.find((function(e){return(0,e.validator)(i)}))?.classGroupId}}var bt=/^\[(.+)\]$/;function wt(e,t,n,r){e.forEach((function(e){if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void wt(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((function(e){var s=e[0];wt(e[1],St(t,s),n,r)}))}else{(""===e?t:St(t,e)).classGroupId=n}}))}function St(e,t){var n=e;return t.split("-").forEach((function(e){n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n}function xt(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function s(s,i){n.set(s,i),++t>e&&(t=0,r=n,n=new Map)}return{get:function(e){var t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set:function(e,t){n.has(e)?n.set(e,t):s(e,t)}}}function Tt(e){var t=e.separator||":",n=1===t.length,r=t[0],s=t.length;return function(e){for(var i,o=[],a=0,c=0,u=0;u<e.length;u++){var l=e[u];if(0===a){if(l===r&&(n||e.slice(u,u+s)===t)){o.push(e.slice(c,u)),c=u+s;continue}if("/"===l){i=u;continue}}"["===l?a++:"]"===l&&a--}var d=0===o.length?e:e.substring(c),h=d.startsWith("!");return{modifiers:o,hasImportantModifier:h,baseClassName:h?d.substring(1):d,maybePostfixModifierPosition:i&&i>c?i-c:void 0}}}var kt=/\s+/;function Et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s,i,o=function(e){var n=t[0],c=t.slice(1).reduce((function(e,t){return t(e)}),n());return r=function(e){return{cache:xt(e.cacheSize),splitModifiers:Tt(e),...yt(e)}}(c),s=r.cache.get,i=r.cache.set,o=a,a(e)};function a(e){var t=s(e);if(t)return t;var n=function(e,t){var n=t.splitModifiers,r=t.getClassGroupId,s=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(kt).map((function(e){var t=n(e),s=t.modifiers,i=t.hasImportantModifier,o=t.baseClassName,a=t.maybePostfixModifierPosition,c=r(a?o.substring(0,a):o),u=Boolean(a);if(!c){if(!a)return{isTailwindClass:!1,originalClassName:e};if(!(c=r(o)))return{isTailwindClass:!1,originalClassName:e};u=!1}var l=function(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach((function(e){"["===e[0]?(t.push.apply(t,n.sort().concat([e])),n=[]):n.push(e)})),t.push.apply(t,n.sort()),t}(s).join(":");return{isTailwindClass:!0,modifierId:i?l+"!":l,classGroupId:c,originalClassName:e,hasPostfixModifier:u}})).reverse().filter((function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,n=e.classGroupId,r=e.hasPostfixModifier,o=t+n;return!i.has(o)&&(i.add(o),s(n,r).forEach((function(e){return i.add(t+e)})),!0)})).reverse().map((function(e){return e.originalClassName})).join(" ")}(e,r);return i(e,n),n}return function(){return o(mt.apply(null,arguments))}}function Ot(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var Ct=/^\[(?:([a-z-]+):)?(.+)\]$/i,Pt=/^\d+\/\d+$/,Rt=new Set(["px","full","screen"]),It=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$t=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,At=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function jt(e){return Bt(e)||Rt.has(e)||Pt.test(e)||Dt(e)}function Dt(e){return Jt(e,"length",Vt)}function Nt(e){return Jt(e,"size",Kt)}function Lt(e){return Jt(e,"position",Kt)}function Mt(e){return Jt(e,"url",Yt)}function Ut(e){return Jt(e,"number",Bt)}function Bt(e){return!Number.isNaN(Number(e))}function qt(e){return e.endsWith("%")&&Bt(e.slice(0,-1))}function Ft(e){return Xt(e)||Jt(e,"number",Xt)}function Ht(e){return Ct.test(e)}function zt(){return!0}function Wt(e){return It.test(e)}function Gt(e){return Jt(e,"",Qt)}function Jt(e,t,n){var r=Ct.exec(e);return!!r&&(r[1]?r[1]===t:n(r[2]))}function Vt(e){return $t.test(e)}function Kt(){return!1}function Yt(e){return e.startsWith("url(")}function Xt(e){return Number.isInteger(Number(e))}function Qt(e){return At.test(e)}function Zt(){var e=Ot("colors"),t=Ot("spacing"),n=Ot("blur"),r=Ot("brightness"),s=Ot("borderColor"),i=Ot("borderRadius"),o=Ot("borderSpacing"),a=Ot("borderWidth"),c=Ot("contrast"),u=Ot("grayscale"),l=Ot("hueRotate"),d=Ot("invert"),h=Ot("gap"),p=Ot("gradientColorStops"),f=Ot("gradientColorStopPositions"),g=Ot("inset"),m=Ot("margin"),_=Ot("opacity"),y=Ot("padding"),v=Ot("saturate"),b=Ot("scale"),w=Ot("sepia"),S=Ot("skew"),x=Ot("space"),T=Ot("translate"),k=function(){return["auto",Ht,t]},E=function(){return[Ht,t]},O=function(){return["",jt]},C=function(){return["auto",Bt,Ht]},P=function(){return["","0",Ht]},R=function(){return[Bt,Ut]},I=function(){return[Bt,Ht]};return{cacheSize:500,theme:{colors:[zt],spacing:[jt],blur:["none","",Wt,Ht],brightness:R(),borderColor:[e],borderRadius:["none","","full",Wt,Ht],borderSpacing:E(),borderWidth:O(),contrast:R(),grayscale:P(),hueRotate:I(),invert:P(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[qt,Dt],inset:k(),margin:k(),opacity:R(),padding:E(),saturate:R(),scale:R(),sepia:P(),skew:I(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",Ht]}],container:["container"],columns:[{columns:[Wt]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[Ht])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ft]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ht]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Ft]}],"grid-cols":[{"grid-cols":[zt]}],"col-start-end":[{col:["auto",{span:["full",Ft]},Ht]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[zt]}],"row-start-end":[{row:["auto",{span:[Ft]},Ht]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ht]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ht]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ht,t]}],"min-w":[{"min-w":["min","max","fit",Ht,jt]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Wt]},Wt,Ht]}],h:[{h:[Ht,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ht,jt]}],"max-h":[{"max-h":[Ht,t,"min","max","fit"]}],"font-size":[{text:["base",Wt,Dt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ut]}],"font-family":[{font:[zt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ht]}],"line-clamp":[{"line-clamp":["none",Bt,Ut]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ht,jt]}],"list-image":[{"list-image":["none",Ht]}],"list-style-type":[{list:["none","disc","decimal",Ht]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",jt]}],"underline-offset":[{"underline-offset":["auto",Ht,jt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ht]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[Lt])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Nt]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mt]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[Ht,jt]}],"outline-w":[{outline:[jt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[jt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Wt,Gt]}],"shadow-color":[{shadow:[zt]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Wt,Ht]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[l]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[l]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ht]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Ht]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ht]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Ft,Ht]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ht]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ht]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ht]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[jt,Ut]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var en=Et(Zt),tn=function(){return tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},tn.apply(this,arguments)};function nn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function rn(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function sn(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}"function"==typeof SuppressedError&&SuppressedError;var on="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,an=new WeakMap;function cn(e,n){var r,s,i,o=(r=n||null,s=function(t){return e.forEach((function(e){return sn(e,t)}))},(i=t.useState((function(){return{value:r,callback:s,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}}))[0]).callback=s,i.facade);return on((function(){var t=an.get(o);if(t){var n=new Set(t),r=new Set(e),s=o.current;n.forEach((function(e){r.has(e)||sn(e,null)})),r.forEach((function(e){n.has(e)||sn(e,s)}))}an.set(o,e)}),[e]),o}function un(e){return e}function ln(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=un);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var s=t(e,r);return n.push(s),function(){n=n.filter((function(e){return e!==s}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var s=n;n=[],s.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(i)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=tn({async:!0,ssr:!1},e),t}var dn=function(e){var n=e.sideCar,r=nn(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=n.read();if(!s)throw new Error("Sidecar medium not found");return t.createElement(s,tn({},r))};function hn(e,t){return e.useMedium(t),dn}dn.isSideCarExport=!0;var pn=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__},fn=new WeakMap,gn=new WeakMap,mn={},_n=0,yn=function(e){return e&&(e.host||yn(e.parentNode))},vn=function(e,t,n,r){var s=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=yn(t);return n&&e.contains(n)?n:null})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);mn[n]||(mn[n]=new WeakMap);var i=mn[n],o=[],a=new Set,c=new Set(s),u=function(e){e&&!a.has(e)&&(a.add(e),u(e.parentNode))};s.forEach(u);var l=function(e){e&&!c.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(a.has(e))l(e);else try{var t=e.getAttribute(r),s=null!==t&&"false"!==t,c=(fn.get(e)||0)+1,u=(i.get(e)||0)+1;fn.set(e,c),i.set(e,u),o.push(e),1===c&&s&&gn.set(e,!0),1===u&&e.setAttribute(n,"true"),s||e.setAttribute(r,"true")}catch(d){}}))};return l(t),a.clear(),_n++,function(){o.forEach((function(e){var t=fn.get(e)-1,s=i.get(e)-1;fn.set(e,t),i.set(e,s),t||(gn.has(e)||e.removeAttribute(r),gn.delete(e)),s||e.removeAttribute(n)})),--_n||(fn=new WeakMap,fn=new WeakMap,gn=new WeakMap,mn={})}},bn=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=t||function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),vn(r,s,n,"aria-hidden")):function(){return null}};const wn={},Sn=function(e,t,n){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/Ethics-IAS/"+e}(e))in wn)return;wn[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(!!n)for(let n=r.length-1;n>=0;n--){const s=r[n];if(s.href===e&&(!t||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))};class xn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Tn extends xn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class kn extends xn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class En extends xn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var On;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(On||(On={}));var Cn=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class Pn{constructor(e,{headers:t={},customFetch:n,region:r=On.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Sn((()=>Promise.resolve().then((()=>Fn))),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Cn(this,void 0,void 0,(function*(){try{const{headers:r,method:s,body:i}=t;let o,a={},{region:c}=t;c||(c=this.region),c&&"any"!==c&&(a["x-region"]=c),i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",o=i):"string"==typeof i?(a["Content-Type"]="text/plain",o=i):"undefined"!=typeof FormData&&i instanceof FormData?o=i:(a["Content-Type"]="application/json",o=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:o}).catch((e=>{throw new Tn(e)})),l=u.headers.get("x-relay-error");if(l&&"true"===l)throw new kn(u);if(!u.ok)throw new En(u);let d,h=(null!==(n=u.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return d="application/json"===h?yield u.json():"application/octet-stream"===h?yield u.blob():"text/event-stream"===h?u:"multipart/form-data"===h?yield u.formData():yield u.text(),{data:d,error:null}}catch(r){return{data:null,error:r}}}))}}var Rn={},In={},$n={},An={},jn={},Dn={},Nn=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Ln=Nn.fetch,Mn=Nn.fetch.bind(Nn),Un=Nn.Headers,Bn=Nn.Request,qn=Nn.Response,Fn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Un,Request:Bn,Response:qn,default:Mn,fetch:Ln},Symbol.toStringTag,{value:"Module"})),Hn=i(Fn);var zn={};Object.defineProperty(zn,"__esModule",{value:!0});let Wn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};zn.default=Wn;var Gn=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dn,"__esModule",{value:!0});const Jn=Gn(Hn),Vn=Gn(zn);Dn.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=Jn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,r;let s=null,i=null,o=null,a=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),u=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&u&&u.length>1&&(o=parseInt(u[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(s={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,a=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,a=200,c="OK")}catch(u){404===e.status&&""===t?(a=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(r=null==s?void 0:s.details)||void 0===r?void 0:r.includes("0 rows"))&&(s=null,a=200,c="OK"),s&&this.shouldThrowOnError)throw new Vn.default(s)}return{error:s,data:i,count:o,status:a,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}returns(){return this}overrideTypes(){return this}};var Kn=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jn,"__esModule",{value:!0});const Yn=Kn(Dn);let Xn=class extends Yn.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=void 0===r?"offset":`${r}.offset`,i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};jn.default=Xn;var Qn=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});const Zn=Qn(jn);let er=class extends Zn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};An.default=er;var tr=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});const nr=tr(An);$n.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let s=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new nr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new nr.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new nr.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new nr.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new nr.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var rr={},sr={};Object.defineProperty(sr,"__esModule",{value:!0}),sr.version=void 0,sr.version="0.0.0-automated",Object.defineProperty(rr,"__esModule",{value:!0}),rr.DEFAULT_HEADERS=void 0;const ir=sr;rr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ir.version}`};var or=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(In,"__esModule",{value:!0});const ar=or($n),cr=or(An),ur=rr;In.default=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},ur.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new ar.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:s}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;n||r?(i=n?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{o.searchParams.append(e,t)}))):(i="POST",a=t);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new cr.default({method:i,url:o,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};var lr=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.PostgrestError=Rn.PostgrestBuilder=Rn.PostgrestTransformBuilder=Rn.PostgrestFilterBuilder=Rn.PostgrestQueryBuilder=Rn.PostgrestClient=void 0;const dr=lr(In);Rn.PostgrestClient=dr.default;const hr=lr($n);Rn.PostgrestQueryBuilder=hr.default;const pr=lr(An);Rn.PostgrestFilterBuilder=pr.default;const fr=lr(jn);Rn.PostgrestTransformBuilder=fr.default;const gr=lr(Dn);Rn.PostgrestBuilder=gr.default;const mr=lr(zn);Rn.PostgrestError=mr.default;var _r=Rn.default={PostgrestClient:dr.default,PostgrestQueryBuilder:hr.default,PostgrestFilterBuilder:pr.default,PostgrestTransformBuilder:fr.default,PostgrestBuilder:gr.default,PostgrestError:mr.default};const{PostgrestClient:yr,PostgrestQueryBuilder:vr,PostgrestFilterBuilder:br,PostgrestTransformBuilder:wr,PostgrestBuilder:Sr,PostgrestError:xr}=_r,Tr={"X-Client-Info":"realtime-js/2.11.2"};var kr,Er,Or,Cr,Pr,Rr;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(kr||(kr={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Er||(Er={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Or||(Or={})),function(e){e.websocket="websocket"}(Cr||(Cr={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Pr||(Pr={}));class Ir{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=n.decode(e.slice(i,i+r));i+=r;const a=n.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:o,event:a,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class $r{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Rr||(Rr={}));const Ar=(e,t,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce(((n,r)=>(n[r]=jr(r,e,t,s),n)),{})},jr=(e,t,n,r)=>{const s=t.find((t=>t.name===e)),i=null==s?void 0:s.type,o=n[e];return i&&!r.includes(i)?Dr(i,o):Nr(o)},Dr=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Br(t,n)}switch(e){case Rr.bool:return Lr(t);case Rr.float4:case Rr.float8:case Rr.int2:case Rr.int4:case Rr.int8:case Rr.numeric:case Rr.oid:return Mr(t);case Rr.json:case Rr.jsonb:return Ur(t);case Rr.timestamp:return qr(t);case Rr.abstime:case Rr.date:case Rr.daterange:case Rr.int4range:case Rr.int8range:case Rr.money:case Rr.reltime:case Rr.text:case Rr.time:case Rr.timestamptz:case Rr.timetz:case Rr.tsrange:case Rr.tstzrange:default:return Nr(t)}},Nr=e=>e,Lr=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Mr=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ur=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Br=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(s){r=i?i.split(","):[]}return r.map((e=>Dr(t,e)))}return e},qr=e=>"string"==typeof e?e.replace(" ","T"):e,Fr=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Hr{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zr,Wr,Gr,Jr;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(zr||(zr={}));class Vr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vr.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=Vr.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Vr.syncDiff(this.state,e,t,n),r())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,r){const s=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(s,((e,t)=>{i[e]||(a[e]=t)})),this.map(i,((e,t)=>{const n=s[e];if(n){const r=t.map((e=>e.presence_ref)),s=n.map((e=>e.presence_ref)),i=t.filter((e=>s.indexOf(e.presence_ref)<0)),c=n.filter((e=>r.indexOf(e.presence_ref)<0));i.length>0&&(o[e]=i),c.length>0&&(a[e]=c)}else o[e]=t})),this.syncDiff(s,{joins:o,leaves:a},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,((t,r)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map((e=>e.presence_ref)),r=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...r)}n(t,i,r)})),this.map(i,((t,n)=>{let s=e[t];if(!s)return;const i=n.map((e=>e.presence_ref));s=s.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=s,r(t,s,n),0===s.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):r,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Wr||(Wr={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Gr||(Gr={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Jr||(Jr={}));class Kr{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Er.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Hr(this,Or.join,this.params,this.timeout),this.rejoinTimer=new $r((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Er.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Er.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Or.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Vr(this),this.broadcastEndpointURL=Fr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:o}}=this.params;this._onError((t=>null==e?void 0:e(Jr.CHANNEL_ERROR,t))),this._onClose((()=>null==e?void 0:e(Jr.CLOSED)));const a={},c={broadcast:s,presence:i,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==r?r:[],private:o};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,s=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,i=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:o,schema:a,table:c,filter:u}}=s,l=t&&t[n];if(!l||l.event!==o||l.schema!==a||l.table!==c||l.filter!==u)return this.unsubscribe(),void(null==e||e(Jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:l.id}))}return this.bindings.postgres_changes=i,void(e&&e(Jr.SUBSCRIBED))}null==e||e(Jr.SUBSCRIBED)})).receive("error",(t=>{null==e||e(Jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null==e||e(Jr.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var r,s,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||n("ok"),o.receive("ok",(()=>n("ok"))),o.receive("error",(()=>n("error"))),o.receive("timeout",(()=>n("timed out")))}));{const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Er.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Or.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const r=new Hr(this,Or.leave,{},e);r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout((()=>r.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Hr(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:c,join:u}=Or;if(n&&[o,a,c,u].indexOf(i)>=0&&n!==this._joinRef())return;let l=this._onMessage(i,t,n);if(t&&!l)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i})).map((e=>e.callback(l,n))):null===(s=this.bindings[i])||void 0===s||s.filter((e=>{var n,r,s,o,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof l&&"ids"in l){const e=l.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:i}=e,o={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:i};l=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(l,n)}))}_isClosed(){return this.state===Er.closed}_isJoined(){return this.state===Er.joined}_isJoining(){return this.state===Er.joining}_isLeaving(){return this.state===Er.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Kr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Or.close,{},e)}_onError(e){this._on(Or.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Er.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Ar(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Ar(e.columns,e.old_record)),t}}const Yr=()=>{},Xr="undefined"!=typeof WebSocket;class Qr{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Tr,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Yr,this.conn=null,this.sendBuffer=[],this.serializer=new Ir,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Sn((()=>Promise.resolve().then((()=>Fn))),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Cr.websocket}`,this.httpEndpoint=Fr(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $r((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});else{if(Xr)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new Zr(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Sn((()=>Promise.resolve().then((()=>Eg))),void 0).then((({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kr.connecting:return Pr.Connecting;case kr.open:return Pr.Open;case kr.closing:return Pr.Closing;default:return Pr.Closed}}isConnected(){return this.connectionState()===Pr.Open}channel(e,t={config:{}}){const n=new Kr(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:s}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let e=null;try{e=JSON.parse(atob(t.split(".")[1]))}catch(n){}if(e&&e.exp){if(!(Math.floor(Date.now()/1e3)-e.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`)}this.accessTokenValue=t,this.channels.forEach((e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(Or.access_token,{access_token:t})}))}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${s&&"("+s+")"||""}`,r),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,r,s))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(Or.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Zr{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=kr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class es extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ts(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class ns extends es{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class rs extends es{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ss=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const is=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Sn((()=>Promise.resolve().then((()=>Fn))),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},os=e=>{if(Array.isArray(e))return e.map((e=>os(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,n])=>{const r=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[r]=os(n)})),t};var as=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const cs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),us=(e,t,n)=>as(void 0,void 0,void 0,(function*(){const r=yield ss(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Sn((()=>Promise.resolve().then((()=>Fn))),void 0)).Response:Response}));e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then((n=>{t(new ns(cs(n),e.status||500))})).catch((e=>{t(new rs(cs(e),e))})):t(new rs(cs(e),e))}));function ls(e,t,n,r,s,i){return as(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(n,((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))})(t,r,s,i)).then((e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>us(e,a,r)))}))}))}function ds(e,t,n,r){return as(this,void 0,void 0,(function*(){return ls(e,"GET",t,n,r)}))}function hs(e,t,n,r,s){return as(this,void 0,void 0,(function*(){return ls(e,"POST",t,r,s,n)}))}function ps(e,t,n,r,s){return as(this,void 0,void 0,(function*(){return ls(e,"DELETE",t,r,s,n)}))}var fs=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const gs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ms={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _s{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=is(r)}uploadOrUpdate(e,t,n,r){return fs(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},ms),r);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const a=i.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),a&&s.append("metadata",this.encodeMetadata(a)),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",i.cacheControl),a&&s.append("metadata",this.encodeMetadata(a))):(s=n,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==r?void 0:r.headers)&&(o=Object.assign(Object.assign({},o),r.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),l=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),d=yield l.json();if(l.ok)return{data:{path:c,id:d.Id,fullPath:d.Key},error:null};return{data:null,error:d}}catch(s){if(ts(s))return{data:null,error:s};throw s}}))}upload(e,t,n){return fs(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,r){return fs(this,void 0,void 0,(function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ms.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:i}),c=yield a.json();if(a.ok)return{data:{path:s,fullPath:c.Key},error:null};return{data:null,error:c}}catch(a){if(ts(a))return{data:null,error:a};throw a}}))}createSignedUploadUrl(e,t){return fs(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield hs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+s.url),o=i.searchParams.get("token");if(!o)throw new es("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}}))}update(e,t,n){return fs(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t,n){return fs(this,void 0,void 0,(function*(){try{return{data:yield hs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}}))}copy(e,t,n){return fs(this,void 0,void 0,(function*(){try{return{data:{path:(yield hs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}}))}createSignedUrl(e,t,n){return fs(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e),s=yield hs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}}))}createSignedUrls(e,t,n){return fs(this,void 0,void 0,(function*(){try{const r=yield hs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}}))}download(e,t){return fs(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield ds(this.fetch,`${this.url}/${n}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(ts(i))return{data:null,error:i};throw i}}))}info(e){return fs(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield ds(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:os(e),error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}}))}exists(e){return fs(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return as(this,void 0,void 0,(function*(){return ls(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ts(n)&&n instanceof rs){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&r.push(o);let a=r.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}remove(e){return fs(this,void 0,void 0,(function*(){try{return{data:yield ps(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}}))}list(e,t,n){return fs(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},gs),t),{prefix:e||""});return{data:yield hs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ys={"X-Client-Info":"storage-js/2.7.1"};var vs=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class bs{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},ys),t),this.fetch=is(n)}listBuckets(){return vs(this,void 0,void 0,(function*(){try{return{data:yield ds(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ts(e))return{data:null,error:e};throw e}}))}getBucket(e){return vs(this,void 0,void 0,(function*(){try{return{data:yield ds(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}}))}createBucket(e,t={public:!1}){return vs(this,void 0,void 0,(function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}}))}updateBucket(e,t){return vs(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,r,s){return as(this,void 0,void 0,(function*(){return ls(e,"PUT",t,r,s,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(ts(n))return{data:null,error:n};throw n}}))}emptyBucket(e){return vs(this,void 0,void 0,(function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return vs(this,void 0,void 0,(function*(){try{return{data:yield ps(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}}))}}class ws extends bs{constructor(e,t={},n){super(e,t,n)}from(e){return new _s(this.url,this.headers,e,this.fetch)}}let Ss="";Ss="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const xs={headers:{"X-Client-Info":`supabase-js-${Ss}/2.49.4`}},Ts={schema:"public"},ks={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Es={};var Os=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Cs=e=>{let t;return t=e||("undefined"==typeof fetch?Mn:fetch),(...e)=>t(...e)},Ps=(e,t,n)=>{const r=Cs(n),s="undefined"==typeof Headers?Un:Headers;return(n,i)=>Os(void 0,void 0,void 0,(function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let c=new s(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(n,Object.assign(Object.assign({},i),{headers:c}))}))};var Rs=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Is="2.69.1",$s=3e4,As=9e4,js={"X-Client-Info":`gotrue-js/${Is}`},Ds="X-Supabase-Api-Version",Ns={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Ls=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ms extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Us(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Bs extends Ms{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class qs extends Ms{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Fs extends Ms{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Hs extends Fs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class zs extends Fs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ws extends Fs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Gs extends Fs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Js extends Fs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vs extends Fs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ks(e){return Us(e)&&"AuthRetryableFetchError"===e.name}class Ys extends Fs{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Xs extends Fs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zs=" \t\n\r=".split(""),ei=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Zs.length;t+=1)e[Zs[t].charCodeAt(0)]=-2;for(let t=0;t<Qs.length;t+=1)e[Qs[t].charCodeAt(0)]=t;return e})();function ti(e,t,n){const r=ei[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function ni(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let o=0;o<e.length;o+=1)ti(e.charCodeAt(o),s,i);return t.join("")}function ri(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function si(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)ti(e.charCodeAt(s),n,r);return new Uint8Array(t)}function ii(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}ri(r,t)}}(e,(e=>t.push(e))),new Uint8Array(t)}const oi=()=>"undefined"!=typeof window&&"undefined"!=typeof document,ai={tested:!1,writable:!1},ci=()=>{if(!oi())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(ai.tested)return ai.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ai.tested=!0,ai.writable=!0}catch(t){ai.tested=!0,ai.writable=!1}return ai.writable};const ui=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Sn((()=>Promise.resolve().then((()=>Fn))),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},li=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},di=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},hi=async(e,t)=>{await e.removeItem(t)};class pi{constructor(){this.promise=new pi.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function fi(e){const t=e.split(".");if(3!==t.length)throw new Xs("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ls.test(t[n]))throw new Xs("JWT not in base64url format");return{header:JSON.parse(ni(t[0])),payload:JSON.parse(ni(t[1])),signature:si(t[2]),raw:{header:t[0],payload:t[1]}}}function gi(e){return("0"+e.toString(16)).substr(-2)}async function mi(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _i(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,gi).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await li(e,`${t}-code-verifier`,s);const i=await mi(r);return[i,r===i?"plain":"s256"]}pi.promiseConstructor=Promise;const yi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;var vi=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const bi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wi=[502,503,504];async function Si(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new Vs(bi(e),0);if(wi.includes(e.status))throw new Vs(bi(e),e.status);let r,s;try{r=await e.json()}catch(o){throw new qs(bi(o),o)}const i=function(e){const t=e.headers.get(Ds);if(!t)return null;if(!t.match(yi))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(o){return null}}(e);if(i&&i.getTime()>=Ns.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new Ys(bi(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new Hs}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new Ys(bi(r),e.status,r.weak_password.reasons);throw new Bs(bi(r),e.status||500,s)}async function xi(e,t,n,r){var s;const i=Object.assign({},null==r?void 0:r.headers);i[Ds]||(i[Ds]=Ns.name),(null==r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const o=null!==(s=null==r?void 0:r.query)&&void 0!==s?s:{};(null==r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(e,t,n,r,s,i){const o=((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(c){throw new Vs(bi(c),0)}a.ok||await Si(a);if(null==r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(c){await Si(c)}}(e,t,n+a,{headers:i,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(c):{data:Object.assign({},c),error:null}}function Ti(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ki(e){const t=Ti(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function Ei(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Oi(e){return{data:e,error:null}}function Ci(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=vi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},user:Object.assign({},o)},error:null}}function Pi(e){return e}var Ri=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class Ii{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=ui(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await xi(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Us(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await xi(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ei})}catch(n){if(Us(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Ri(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await xi(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ci,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Us(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await xi(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ei})}catch(t){if(Us(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},u=await xi(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:Pi});if(u.error)throw u.error;const l=await u.json(),d=null!==(i=u.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(a=null===(o=u.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t})),c.total=parseInt(d)),{data:Object.assign(Object.assign({},l),c),error:null}}catch(c){if(Us(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await xi(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ei})}catch(t){if(Us(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await xi(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ei})}catch(n){if(Us(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await xi(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ei})}catch(n){if(Us(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await xi(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Us(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await xi(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Us(t))return{data:null,error:t};throw t}}}const $i={getItem:e=>ci()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ci()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ci()&&globalThis.localStorage.removeItem(e)}};function Ai(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ji=!!(globalThis&&ci()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Di extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ni extends Di{}async function Li(e,t,n){const r=new globalThis.AbortController;return t>0&&setTimeout((()=>{r.abort()}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},(async r=>{if(!r){if(0===t)throw new Ni(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ji)try{await globalThis.navigator.locks.query()}catch(s){}return await n()}try{return await n()}finally{}}))))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Mi={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:js,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ui(e,t,n){return await n()}class Bi{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bi.nextInstanceID,Bi.nextInstanceID+=1,this.instanceID>0&&oi();const r=Object.assign(Object.assign({},Mi),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ii({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ui(r.fetch),this.lock=r.lock||Ui,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:oi()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Li:this.lock=Ui,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:ci()?this.storage=$i:(this.memoryStorage={},this.storage=Ai(this.memoryStorage)):(this.memoryStorage={},this.storage=Ai(this.memoryStorage)),oi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Is}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(r){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),oi()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return Us(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout((async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Us(t)?{error:t}:{error:new qs("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await xi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ti}),{data:i,error:o}=s;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(s){if(Us(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await _i(this.storage,this.storageKey)),s=await xi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:Ti})}else{if(!("phone"in e))throw new Ws("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;s=await xi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(r=null==o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:Ti})}}const{data:i,error:o}=s;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(s){if(Us(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await xi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:ki})}else{if(!("phone"in e))throw new Ws("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await xi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:ki})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new zs}}catch(t){if(Us(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await di(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await xi(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ti});if(await hi(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new zs}}catch(s){if(Us(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:i}=e,o=await xi(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ti}),{data:a,error:c}=o;return c?{data:{user:null,session:null},error:c}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c}):{data:{user:null,session:null},error:new zs}}catch(t){if(Us(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,i;try{if("email"in e){const{email:r,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await _i(this.storage,this.storageKey));const{error:a}=await xi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:a}=await xi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new Ws("You must provide either an email or phone number.")}catch(o){if(Us(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:o}=await xi(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ti});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,c=i.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(r){if(Us(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,i=null;return"pkce"===this.flowType&&([s,i]=await _i(this.storage,this.storageKey)),await xi(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Oi})}catch(s){if(Us(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Hs;const{error:r}=await xi(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(Us(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:i}=await xi(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:i,error:o}=await xi(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new Ws("You must provide either an email or phone number and a type")}catch(t){if(Us(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await di(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<As;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await xi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ei}):await this._useSession((async e=>{var t,n,r;const{data:s,error:i}=e;if(i)throw i;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await xi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Ei}):{data:{user:null},error:new Hs}}))}catch(t){if(Us(t))return function(e){return Us(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await hi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new Hs;const i=r.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await _i(this.storage,this.storageKey));const{data:c,error:u}=await xi(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:Ei});if(u)throw u;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(n){if(Us(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Hs;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:i}=fi(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Us(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new Hs;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(Us(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!oi())throw new Gs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Gs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Js("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Gs("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Js("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:i,expires_in:o,expires_at:a,token_type:c}=e;if(!(s&&o&&i&&c))throw new Gs("No session defined in URL");const u=Math.round(Date.now()/1e3),l=parseInt(o);let d=u+l;a&&(d=parseInt(a));const{data:h,error:p}=await this._getUser(s);if(p)throw p;const f={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:l,expires_at:d,refresh_token:i,token_type:c,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(n){if(Us(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await di(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Us(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await hi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s)}}))}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await _i(this.storage,this.storageKey,!0));try{return await xi(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Us(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Us(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession((async t=>{var n,r,s,i,o;const{data:a,error:c}=t;if(c)throw c;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await xi(this.fetch,"GET",u,{headers:this.headers,jwt:null!==(o=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})}));if(r)throw r;return oi()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(Us(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)throw i;return await xi(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(Us(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await xi(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ti})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ks(t)&&Date.now()+n-s<$s},new Promise(((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(s){if(!r(i,s))return void t(s)}})()})))}catch(s){if(this._debug(t,"error",s),Us(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),oi()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await di(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<As;if(this._debug(t,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(Ks(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return void this._debug(t,"error",n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Hs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new pi;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Hs;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),Us(s)){const e={session:null,error:s};return Ks(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(s){r.push(s)}}));if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await li(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await hi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&oi()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),$s);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const t=Date.now();try{return await this._useSession((async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/$s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof Di))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!oi()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await _i(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await xi(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Us(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:c}=await xi(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return c?{data:null,error:c}:("totp"===e.factorType&&(null===(r=null==a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(t){if(Us(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:o}=await xi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}))}catch(t){if(Us(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await xi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Us(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),s=n.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=fi(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find((t=>t.kid===e));if(n)return n;if(n=this.jwks.keys.find((t=>t.kid===e)),n&&this.jwks_cached_at+6e5>Date.now())return n;const{data:r,error:s}=await xi(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!r.keys||0===r.keys.length)throw new Xs("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find((t=>t.kid===e)),!n)throw new Xs("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:s,signature:i,raw:{header:o,payload:a}}=fi(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await this.fetchJwk(r.kid,t),l=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,l,i,ii(`${o}.${a}`))))throw new Xs("Invalid JWT signature");return{data:{claims:s,header:r,signature:i},error:null}}catch(n){if(Us(n))return{data:null,error:n};throw n}}}Bi.nextInstanceID=0;const qi=Bi;class Fi extends qi{constructor(e){super(e)}}var Hi=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class zi{constructor(e,t,n){var r,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=e.replace(/\/$/,"");this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c=function(e,t){const{db:n,auth:r,realtime:s,global:i}=e,{db:o,auth:a,realtime:c,global:u}=t,l={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>Rs(this,void 0,void 0,(function*(){return""}))};return e.accessToken?l.accessToken=e.accessToken:delete l.accessToken,l}(null!=n?n:{},{db:Ts,realtime:Es,auth:Object.assign(Object.assign({},ks),{storageKey:a}),global:xs});this.storageKey=null!==(r=c.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=c.global.headers)&&void 0!==s?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=c.auth)&&void 0!==i?i:{},this.headers,c.global.fetch),this.fetch=Ps(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new yr(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Pn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ws(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Hi(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:s,flowType:i,lock:o,debug:a},c,u){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fi({url:this.authUrl,headers:Object.assign(Object.assign({},l),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:i,lock:o,debug:a,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Qr(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Wi=(e,t,n)=>new zi(e,t,n),Gi=["top","right","bottom","left"],Ji=Math.min,Vi=Math.max,Ki=Math.round,Yi=Math.floor,Xi=e=>({x:e,y:e}),Qi={left:"right",right:"left",bottom:"top",top:"bottom"},Zi={start:"end",end:"start"};function eo(e,t,n){return Vi(e,Ji(t,n))}function to(e,t){return"function"==typeof e?e(t):e}function no(e){return e.split("-")[0]}function ro(e){return e.split("-")[1]}function so(e){return"x"===e?"y":"x"}function io(e){return"y"===e?"height":"width"}function oo(e){return["top","bottom"].includes(no(e))?"y":"x"}function ao(e){return so(oo(e))}function co(e){return e.replace(/start|end/g,(e=>Zi[e]))}function uo(e){return e.replace(/left|right|bottom|top/g,(e=>Qi[e]))}function lo(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ho(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function po(e,t,n){let{reference:r,floating:s}=e;const i=oo(t),o=ao(t),a=io(o),c=no(t),u="y"===i,l=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:l,y:r.y-s.height};break;case"bottom":p={x:l,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(ro(t)){case"start":p[o]-=h*(n&&u?-1:1);break;case"end":p[o]+=h*(n&&u?-1:1)}return p}async function fo(e,t){var n;void 0===t&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=to(t,e),f=lo(p),g=a[h?"floating"===d?"reference":"floating":d],m=ho(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:l,strategy:c})),_="floating"===d?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(a.floating)),v=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},b=ho(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:y,strategy:c}):_);return{top:(m.top-b.top+f.top)/v.y,bottom:(b.bottom-m.bottom+f.bottom)/v.y,left:(m.left-b.left+f.left)/v.x,right:(b.right-m.right+f.right)/v.x}}function go(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mo(e){return Gi.some((t=>e[t]>=0))}function _o(){return"undefined"!=typeof window}function yo(e){return wo(e)?(e.nodeName||"").toLowerCase():"#document"}function vo(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function bo(e){var t;return null==(t=(wo(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function wo(e){return!!_o()&&(e instanceof Node||e instanceof vo(e).Node)}function So(e){return!!_o()&&(e instanceof Element||e instanceof vo(e).Element)}function xo(e){return!!_o()&&(e instanceof HTMLElement||e instanceof vo(e).HTMLElement)}function To(e){return!(!_o()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof vo(e).ShadowRoot)}function ko(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Io(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Eo(e){return["table","td","th"].includes(yo(e))}function Oo(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function Co(e){const t=Po(),n=So(e)?Io(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Po(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Ro(e){return["html","body","#document"].includes(yo(e))}function Io(e){return vo(e).getComputedStyle(e)}function $o(e){return So(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ao(e){if("html"===yo(e))return e;const t=e.assignedSlot||e.parentNode||To(e)&&e.host||bo(e);return To(t)?t.host:t}function jo(e){const t=Ao(e);return Ro(t)?e.ownerDocument?e.ownerDocument.body:e.body:xo(t)&&ko(t)?t:jo(t)}function Do(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const s=jo(e),i=s===(null==(r=e.ownerDocument)?void 0:r.body),o=vo(s);if(i){const e=No(o);return t.concat(o,o.visualViewport||[],ko(s)?s:[],e&&n?Do(e):[])}return t.concat(s,Do(s,[],n))}function No(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Lo(e){const t=Io(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=xo(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=Ki(n)!==i||Ki(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Mo(e){return So(e)?e:e.contextElement}function Uo(e){const t=Mo(e);if(!xo(t))return Xi(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Lo(t);let o=(i?Ki(n.width):n.width)/r,a=(i?Ki(n.height):n.height)/s;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const Bo=Xi(0);function qo(e){const t=vo(e);return Po()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Bo}function Fo(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),i=Mo(e);let o=Xi(1);t&&(r?So(r)&&(o=Uo(r)):o=Uo(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==vo(e))&&t}(i,n,r)?qo(i):Xi(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,l=s.width/o.x,d=s.height/o.y;if(i){const e=vo(i),t=r&&So(r)?vo(r):r;let n=e,s=No(n);for(;s&&r&&t!==n;){const e=Uo(s),t=s.getBoundingClientRect(),r=Io(s),i=t.left+(s.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(s.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,u*=e.y,l*=e.x,d*=e.y,c+=i,u+=o,n=vo(s),s=No(n)}}return ho({width:l,height:d,x:c,y:u})}function Ho(e,t){const n=$o(e).scrollLeft;return t?t.left+n:Fo(bo(e)).left+n}function zo(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:Ho(e,r)),y:r.top+t.scrollTop}}function Wo(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=vo(e),r=bo(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const e=Po();(!e||e&&"fixed"===t)&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}(e,n);else if("document"===t)r=function(e){const t=bo(e),n=$o(e),r=e.ownerDocument.body,s=Vi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Vi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ho(e);const a=-n.scrollTop;return"rtl"===Io(r).direction&&(o+=Vi(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}(bo(e));else if(So(t))r=function(e,t){const n=Fo(e,!0,"fixed"===t),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=xo(e)?Uo(e):Xi(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:s*i.x,y:r*i.y}}(t,n);else{const n=qo(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return ho(r)}function Go(e,t){const n=Ao(e);return!(n===t||!So(n)||Ro(n))&&("fixed"===Io(n).position||Go(n,t))}function Jo(e,t,n){const r=xo(t),s=bo(t),i="fixed"===n,o=Fo(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const c=Xi(0);function u(){c.x=Ho(s)}if(r||!r&&!i)if(("body"!==yo(t)||ko(s))&&(a=$o(t)),r){const e=Fo(t,!0,i,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else s&&u();i&&!r&&s&&u();const l=!s||r||i?Xi(0):zo(s,a);return{x:o.left+a.scrollLeft-c.x-l.x,y:o.top+a.scrollTop-c.y-l.y,width:o.width,height:o.height}}function Vo(e){return"static"===Io(e).position}function Ko(e,t){if(!xo(e)||"fixed"===Io(e).position)return null;if(t)return t(e);let n=e.offsetParent;return bo(e)===n&&(n=n.ownerDocument.body),n}function Yo(e,t){const n=vo(e);if(Oo(e))return n;if(!xo(e)){let t=Ao(e);for(;t&&!Ro(t);){if(So(t)&&!Vo(t))return t;t=Ao(t)}return n}let r=Ko(e,t);for(;r&&Eo(r)&&Vo(r);)r=Ko(r,t);return r&&Ro(r)&&Vo(r)&&!Co(r)?n:r||function(e){let t=Ao(e);for(;xo(t)&&!Ro(t);){if(Co(t))return t;if(Oo(t))return null;t=Ao(t)}return null}(e)||n}const Xo={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i="fixed"===s,o=bo(r),a=!!t&&Oo(t.floating);if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Xi(1);const l=Xi(0),d=xo(r);if((d||!d&&!i)&&(("body"!==yo(r)||ko(o))&&(c=$o(r)),xo(r))){const e=Fo(r);u=Uo(r),l.x=e.x+r.clientLeft,l.y=e.y+r.clientTop}const h=!o||d||i?Xi(0):zo(o,c,!0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+l.x+h.x,y:n.y*u.y-c.scrollTop*u.y+l.y+h.y}},getDocumentElement:bo,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[..."clippingAncestors"===n?Oo(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Do(e,[],!1).filter((e=>So(e)&&"body"!==yo(e))),s=null;const i="fixed"===Io(e).position;let o=i?Ao(e):e;for(;So(o)&&!Ro(o);){const t=Io(o),n=Co(o);n||"fixed"!==t.position||(s=null),(i?!n&&!s:!n&&"static"===t.position&&s&&["absolute","fixed"].includes(s.position)||ko(o)&&!n&&Go(e,o))?r=r.filter((e=>e!==o)):s=t,o=Ao(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=i[0],a=i.reduce(((e,n)=>{const r=Wo(t,n,s);return e.top=Vi(r.top,e.top),e.right=Ji(r.right,e.right),e.bottom=Ji(r.bottom,e.bottom),e.left=Vi(r.left,e.left),e}),Wo(t,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:Yo,getElementRects:async function(e){const t=this.getOffsetParent||Yo,n=this.getDimensions,r=await n(e.floating);return{reference:Jo(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Lo(e);return{width:t,height:n}},getScale:Uo,isElement:So,isRTL:function(e){return"rtl"===Io(e).direction}};function Qo(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Zo(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,u=Mo(e),l=s||i?[...u?Do(u):[],...Do(t)]:[];l.forEach((e=>{s&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=u&&a?function(e,t){let n,r=null;const s=bo(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),i();const u=e.getBoundingClientRect(),{left:l,top:d,width:h,height:p}=u;if(a||t(),!h||!p)return;const f={rootMargin:-Yi(d)+"px "+-Yi(s.clientWidth-(l+h))+"px "+-Yi(s.clientHeight-(d+p))+"px "+-Yi(l)+"px",threshold:Vi(0,Ji(1,c))||1};let g=!0;function m(t){const r=t[0].intersectionRatio;if(r!==c){if(!g)return o();r?o(!1,r):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}1!==r||Qo(u,e.getBoundingClientRect())||o(),g=!1}try{r=new IntersectionObserver(m,{...f,root:s.ownerDocument})}catch(_){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),i}(u,n):null;let h,p=-1,f=null;o&&(f=new ResizeObserver((e=>{let[r]=e;r&&r.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),u&&!c&&f.observe(u),f.observe(t));let g=c?Fo(e):null;return c&&function t(){const r=Fo(e);g&&!Qo(g,r)&&n();g=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;l.forEach((e=>{s&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,c&&cancelAnimationFrame(h)}}const ea=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,c=await async function(e,t){const{placement:n,platform:r,elements:s}=e,i=await(null==r.isRTL?void 0:r.isRTL(s.floating)),o=no(n),a=ro(n),c="y"===oo(n),u=["left","top"].includes(o)?-1:1,l=i&&c?-1:1,d=to(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),c?{x:p*l,y:h*u}:{x:h*u,y:p*l}}(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},ta=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=to(e,t),u={x:n,y:r},l=await fo(t,c),d=oo(no(s)),h=so(d);let p=u[h],f=u[d];if(i){const e="y"===h?"bottom":"right";p=eo(p+l["y"===h?"top":"left"],p,p-l[e])}if(o){const e="y"===d?"bottom":"right";f=eo(f+l["y"===d?"top":"left"],f,f-l[e])}const g=a.fn({...t,[h]:p,[d]:f});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:i,[d]:o}}}}}},na=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:l=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...m}=to(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const _=no(s),y=oo(a),v=no(a)===a,b=await(null==c.isRTL?void 0:c.isRTL(u.floating)),w=h||(v||!g?[uo(a)]:function(e){const t=uo(e);return[co(e),t,co(t)]}(a)),S="none"!==f;!h&&S&&w.push(...function(e,t,n,r){const s=ro(e);let i=function(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}(no(e),"start"===n,r);return s&&(i=i.map((e=>e+"-"+s)),t&&(i=i.concat(i.map(co)))),i}(a,g,f,b));const x=[a,...w],T=await fo(t,m),k=[];let E=(null==(r=i.flip)?void 0:r.overflows)||[];if(l&&k.push(T[_]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=ro(e),s=ao(e),i=io(s);let o="x"===s?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=uo(o)),[o,uo(o)]}(s,o,b);k.push(T[e[0]],T[e[1]])}if(E=[...E,{placement:s,overflows:k}],!k.every((e=>e<=0))){var O,C;const e=((null==(O=i.flip)?void 0:O.index)||0)+1,t=x[e];if(t){var P;const n="alignment"===d&&y!==oo(t),r=(null==(P=E[0])?void 0:P.overflows[0])>0;if(!n||r)return{data:{index:e,overflows:E},reset:{placement:t}}}let n=null==(C=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:C.placement;if(!n)switch(p){case"bestFit":{var R;const e=null==(R=E.filter((e=>{if(S){const t=oo(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:R[0];e&&(n=e);break}case"initialPlacement":n=a}if(s!==n)return{reset:{placement:n}}}return{}}}},ra=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:c=()=>{},...u}=to(e,t),l=await fo(t,u),d=no(s),h=ro(s),p="y"===oo(s),{width:f,height:g}=i.floating;let m,_;"top"===d||"bottom"===d?(m=d,_=h===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=d,m="end"===h?"top":"bottom");const y=g-l.top-l.bottom,v=f-l.left-l.right,b=Ji(g-l[m],y),w=Ji(f-l[_],v),S=!t.middlewareData.shift;let x=b,T=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(T=v),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(x=y),S&&!h){const e=Vi(l.left,0),t=Vi(l.right,0),n=Vi(l.top,0),r=Vi(l.bottom,0);p?T=f-2*(0!==e||0!==t?e+t:Vi(l.left,l.right)):x=g-2*(0!==n||0!==r?n+r:Vi(l.top,l.bottom))}await c({...t,availableWidth:T,availableHeight:x});const k=await o.getDimensions(a.floating);return f!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}},sa=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=to(e,t);switch(r){case"referenceHidden":{const e=go(await fo(t,{...s,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:mo(e)}}}case"escaped":{const e=go(await fo(t,{...s,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:mo(e)}}}default:return{}}}}},ia=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=t,{element:u,padding:l=0}=to(e,t)||{};if(null==u)return{};const d=lo(l),h={x:n,y:r},p=ao(s),f=io(p),g=await o.getDimensions(u),m="y"===p,_=m?"top":"left",y=m?"bottom":"right",v=m?"clientHeight":"clientWidth",b=i.reference[f]+i.reference[p]-h[p]-i.floating[f],w=h[p]-i.reference[p],S=await(null==o.getOffsetParent?void 0:o.getOffsetParent(u));let x=S?S[v]:0;x&&await(null==o.isElement?void 0:o.isElement(S))||(x=a.floating[v]||i.floating[f]);const T=b/2-w/2,k=x/2-g[f]/2-1,E=Ji(d[_],k),O=Ji(d[y],k),C=E,P=x-g[f]-O,R=x/2-g[f]/2+T,I=eo(C,R,P),$=!c.arrow&&null!=ro(s)&&R!==I&&i.reference[f]/2-(R<C?E:O)-g[f]/2<0,A=$?R<C?R-C:R-P:0;return{[p]:h[p]+A,data:{[p]:I,centerOffset:R-I-A,...$&&{alignmentOffset:A}},reset:$}}}),oa=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=to(e,t),l={x:n,y:r},d=oo(s),h=so(d);let p=l[h],f=l[d];const g=to(a,t),m="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const e="y"===h?"height":"width",t=i.reference[h]-i.floating[e]+m.mainAxis,n=i.reference[h]+i.reference[e]-m.mainAxis;p<t?p=t:p>n&&(p=n)}if(u){var _,y;const e="y"===h?"width":"height",t=["top","left"].includes(no(s)),n=i.reference[d]-i.floating[e]+(t&&(null==(_=o.offset)?void 0:_[d])||0)+(t?0:m.crossAxis),r=i.reference[d]+i.reference[e]+(t?0:(null==(y=o.offset)?void 0:y[d])||0)-(t?m.crossAxis:0);f<n?f=n:f>r&&(f=r)}return{[h]:p,[d]:f}}}},aa=(e,t,n)=>{const r=new Map,s={platform:Xo,...n},i={...s.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(null==o.isRTL?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:l,y:d}=po(u,r,c),h=r,p={},f=0;for(let g=0;g<a.length;g++){const{name:n,fn:i}=a[g],{x:m,y:_,data:y,reset:v}=await i({x:l,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});l=null!=m?m:l,d=null!=_?_:d,p={...p,[n]:{...p[n],...y}},v&&f<=50&&(f++,"object"==typeof v&&(v.placement&&(h=v.placement),v.rects&&(u=!0===v.rects?await o.getElementRects({reference:e,floating:t,strategy:s}):v.rects),({x:l,y:d}=po(u,h,c))),g=-1)}return{x:l,y:d,placement:h,strategy:s,middlewareData:p}})(e,t,{...s,platform:i})};let ca;const ua=new Uint8Array(16);function la(){if(!ca&&(ca="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ca))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ca(ua)}const da=[];for(let Og=0;Og<256;++Og)da.push((Og+256).toString(16).slice(1));const ha={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function pa(e,t,n){if(ha.randomUUID&&!t&&!e)return ha.randomUUID();const r=(e=e||{}).random||(e.rng||la)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return da[e[t+0]]+da[e[t+1]]+da[e[t+2]]+da[e[t+3]]+"-"+da[e[t+4]]+da[e[t+5]]+"-"+da[e[t+6]]+da[e[t+7]]+"-"+da[e[t+8]]+da[e[t+9]]+"-"+da[e[t+10]]+da[e[t+11]]+da[e[t+12]]+da[e[t+13]]+da[e[t+14]]+da[e[t+15]]}(r)}var fa={exports:{}};function ga(){}function ma(){}ma.resetWarningCache=ga;fa.exports=function(){function e(e,t,n,r,s,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ma,resetWarningCache:ga};return n.PropTypes=n,n}();const _a=s(fa.exports),ya="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,va="9.20.0",ba=globalThis;function wa(){return Sa(ba),ba}function Sa(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||va,t[va]=t[va]||{}}function xa(e,t,n=ba){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[va]=r[va]||{};return s[e]||(s[e]=t())}const Ta=Object.prototype.toString;function ka(e){switch(Ta.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Da(e,Error)}}function Ea(e,t){return Ta.call(e)===`[object ${t}]`}function Oa(e){return Ea(e,"ErrorEvent")}function Ca(e){return Ea(e,"DOMError")}function Pa(e){return Ea(e,"String")}function Ra(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Ia(e){return null===e||Ra(e)||"object"!=typeof e&&"function"!=typeof e}function $a(e){return Ea(e,"Object")}function Aa(e){return"undefined"!=typeof Event&&Da(e,Event)}function ja(e){return Boolean(e?.then&&"function"==typeof e.then)}function Da(e,t){try{return e instanceof t}catch(n){return!1}}function Na(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const La=ba;function Ma(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(u=Ua(n,l),!("html"===u||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch(n){return"<unknown>"}}function Ua(e,t){const n=e,r=[];if(!n?.tagName)return"";if(La.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(s?.length)s.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&Pa(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const e=n.getAttribute(o);e&&r.push(`[${o}="${e}"]`)}return r.join("")}function Ba(){try{return La.document.location.href}catch(e){return""}}const qa=["debug","info","warn","error","log","assert","trace"],Fa={};function Ha(e){if(!("console"in ba))return e();const t=ba.console,n={},r=Object.keys(Fa);r.forEach((e=>{const r=Fa[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const za=xa("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return ya?qa.forEach((n=>{t[n]=(...t)=>{e&&Ha((()=>{ba.console[n](`Sentry Logger [${n}]:`,...t)}))}})):qa.forEach((e=>{t[e]=()=>{}})),t}));function Wa(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Ga(e,t){if(!Array.isArray(e))return"";const n=[];for(let s=0;s<e.length;s++){const t=e[s];try{Na(t)?n.push("[VueViewModel]"):n.push(String(t))}catch(r){n.push("[value cannot be serialized]")}}return n.join(t)}function Ja(e,t,n=!1){return!!Pa(e)&&(Ea(t,"RegExp")?t.test(e):!!Pa(t)&&(n?e===t:e.includes(t)))}function Va(e,t=[],n=!1){return t.some((t=>Ja(e,t,n)))}function Ka(e,t,n){if(!(t in e))return;const r=e[t];if("function"!=typeof r)return;const s=n(r);"function"==typeof s&&Xa(s,r);try{e[t]=s}catch{ya&&za.log(`Failed to replace method "${t}" in object`,e)}}function Ya(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(r){ya&&za.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Xa(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Ya(e,"__sentry_original__",t)}catch(n){}}function Qa(e){return e.__sentry_original__}function Za(e){if(ka(e))return{message:e.message,name:e.name,stack:e.stack,...tc(e)};if(Aa(e)){const t={type:e.type,target:ec(e.target),currentTarget:ec(e.currentTarget),...tc(e)};return"undefined"!=typeof CustomEvent&&Da(e,CustomEvent)&&(t.detail=e.detail),t}return e}function ec(e){try{return t=e,"undefined"!=typeof Element&&Da(t,Element)?Ma(e):Object.prototype.toString.call(e)}catch(n){return"<unknown>"}var t}function tc(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function nc(e=function(){const e=ba;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(n){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&t())>>e/4).toString(16)))}function rc(e){return e.exception?.values?.[0]}function sc(e){const{message:t,event_id:n}=e;if(t)return t;const r=rc(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ic(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function oc(e,t){const n=rc(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r?.data,...t.data};n.mechanism.data=e}}function ac(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{Ya(e,"__sentry_captured__",!0)}catch(t){}return!1}function cc(){return Date.now()/1e3}const uc=function(){const{performance:e}=ba;if(!e?.now)return cc;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}();function lc(e){const t=uc(),n={sid:nc(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(n)};return e&&dc(n,e),n}function dc(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||uc(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:nc()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function hc(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=hc(r[s],t[s],n-1));return r}const pc="_sentrySpan";function fc(e,t){t?Ya(e,pc,t):delete e[pc]}function gc(e){return e[pc]}function mc(){return nc()}function _c(){return nc().substring(16)}let yc=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:mc(),sampleRand:Math.random()}}clone(){const t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,fc(t,gc(this)),t}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&dc(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n="function"==typeof t?t(this):t,r=n instanceof e?n.getScopeData():$a(n)?t:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:u=[],propagationContext:l}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,fc(this,void 0),this._attachments=[],this.setPropagationContext({traceId:mc(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:cc(),...e,message:e.message?Wa(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:gc(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=hc(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||nc();if(!this._client)return za.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n?.event_id||nc();if(!this._client)return za.warn("No client configured on scope - will not capture message!"),r;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureEvent(e,t){const n=t?.event_id||nc();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(za.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}};class vc{constructor(e,t){let n,r;n=e||new yc,r=t||new yc,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(r){throw this._popScope(),r}return ja(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function bc(){const e=Sa(wa());return e.stack=e.stack||new vc(xa("defaultCurrentScope",(()=>new yc)),xa("defaultIsolationScope",(()=>new yc)))}function wc(e){return bc().withScope(e)}function Sc(e,t){const n=bc();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function xc(e){return bc().withScope((()=>e(bc().getIsolationScope())))}function Tc(e){const t=Sa(e);return t.acs?t.acs:{withIsolationScope:xc,withScope:wc,withSetScope:Sc,withSetIsolationScope:(e,t)=>xc(t),getCurrentScope:()=>bc().getScope(),getIsolationScope:()=>bc().getIsolationScope()}}function kc(){return Tc(wa()).getCurrentScope()}function Ec(){return Tc(wa()).getIsolationScope()}function Oc(){return kc().getClient()}function Cc(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,i={trace_id:n,span_id:s||_c()};return r&&(i.parent_span_id=r),i}const Pc="sentry.profile_id",Rc="sentry.exclusive_time";function Ic(e){return{scope:e._sentryScope,isolationScope:e._sentryIsolationScope}}const $c=/^sentry-/;function Ac(e){const t=function(e){if(!e||!Pa(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=jc(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return jc(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match($c)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function jc(e){return e.split(",").map((e=>e.split("=").map((e=>{try{return decodeURIComponent(e.trim())}catch{return}})))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}let Dc=!1;function Nc(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:Bc(e).parent_span_id,i=Ic(e).scope;return{parent_span_id:s,span_id:r?i?.getPropagationContext().propagationSpanId||_c():t,trace_id:n}}function Lc(e){return e&&e.length>0?e.map((({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:s})=>({span_id:e,trace_id:t,sampled:1===n,attributes:s,...r}))):void 0}function Mc(e){return"number"==typeof e?Uc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Uc(e.getTime()):uc()}function Uc(e){return e>9999999999?e/1e3:e}function Bc(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:s,name:i,endTime:o,status:a,links:c}=e;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Mc(s),timestamp:Mc(o)||void 0,status:qc(a),op:r["sentry.op"],origin:r["sentry.origin"],links:Lc(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function qc(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function Fc(e){return e._sentryRootSpan||e}function Hc(){Dc||(Ha((()=>{})),Dc=!0)}const zc="?",Wc=/\(error: (.*)\)/,Gc=/captureMessage|captureException/;function Jc(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,r=0)=>{const s=[],i=e.split("\n");for(let o=n;o<i.length;o++){const e=i[o];if(e.length>1024)continue;const n=Wc.test(e)?e.replace(Wc,"$1"):e;if(!n.match(/\S*Error: /)){for(const e of t){const t=e(n);if(t){s.push(t);break}}if(s.length>=50+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Vc(t).function||"")&&t.pop();t.reverse(),Gc.test(Vc(t).function||"")&&(t.pop(),Gc.test(Vc(t).function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||Vc(t).filename,function:e.function||zc})))}(s.slice(r))}}function Vc(e){return e[e.length-1]||{}}const Kc="<anonymous>";function Yc(e){try{return e&&"function"==typeof e&&e.name||Kc}catch(t){return Kc}}function Xc(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(n){return}}}const Qc={},Zc={};function eu(e,t){Qc[e]=Qc[e]||[],Qc[e].push(t)}function tu(e,t){if(!Zc[e]){Zc[e]=!0;try{t()}catch(n){ya&&za.error(`Error while instrumenting ${e}`,n)}}}function nu(e,t){const n=e&&Qc[e];if(n)for(const s of n)try{s(t)}catch(r){ya&&za.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Yc(s)}\nError:`,r)}}let ru=null;function su(){ru=ba.onerror,ba.onerror=function(e,t,n,r,s){return nu("error",{column:r,error:s,line:n,msg:e,url:t}),!!ru&&ru.apply(this,arguments)},ba.onerror.__SENTRY_INSTRUMENTED__=!0}let iu=null;function ou(){iu=ba.onunhandledrejection,ba.onunhandledrejection=function(e){return nu("unhandledrejection",e),!iu||iu.apply(this,arguments)},ba.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const au="production",cu=/^o(\d+)\./,uu=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function lu(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${o}`}function du(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function hu(e){const t="string"==typeof e?function(e){const t=uu.exec(e);if(!t)return void Ha((()=>{}));const[n,r,s="",i="",o="",a=""]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return du({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}(e):du(e);if(t&&function(e){if(!ya)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(za.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(za.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(za.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(za.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function pu(e,t){const n=t.getOptions(),{publicKey:r,host:s}=t.getDsn()||{};let i;n.orgId?i=String(n.orgId):s&&(i=function(e){const t=e.match(cu);return t?.[1]}(s));const o={environment:n.environment||au,release:n.release,public_key:r,trace_id:e,org_id:i};return t.emit("createDsc",o),o}function fu(e){const t=Oc();if(!t)return{};const n=Fc(e),r=Bc(n),s=r.data,i=n.spanContext().traceState,o=i?.get("sentry.sample_rate")??s["sentry.sample_rate"]??s["sentry.previous_trace_sample_rate"];function a(e){return"number"!=typeof o&&"string"!=typeof o||(e.sample_rate=`${o}`),e}const c=n._frozenDsc;if(c)return a(c);const u=i?.get("sentry.dsc"),l=u&&Ac(u);if(l)return a(l);const d=pu(e.spanContext().traceId,t),h=s["sentry.source"],p=r.description;return"url"!==h&&p&&(d.transaction=p),function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||Oc()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}()&&(d.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(n)),d.sample_rand=i?.get("sentry.sample_rand")??Ic(n).scope?.getPropagationContext().sampleRand.toString()),a(d),t.emit("createDsc",d,n),d}function gu(e,t=100,n=1/0){try{return _u("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function mu(e,t=3,n=102400){const r=gu(e,t);return s=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>n?mu(e,t-1,n):r;var s}function _u(e,t,n=1/0,r=1/0,s=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function n(t){e.delete(t)}return[t,n]}()){const[i,o]=s;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Na(t))return"[VueViewModel]";if($a(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${Yc(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return _u("",u.toJSON(),c-1,r,s)}catch(p){}const l=Array.isArray(t)?[]:{};let d=0;const h=Za(t);for(const f in h){if(!Object.prototype.hasOwnProperty.call(h,f))continue;if(d>=r){l[f]="[MaxProperties ~]";break}const e=h[f];l[f]=_u(f,e,c-1,r,s),d++}return o(t),l}function yu(e,t=[]){return[e,t]}function vu(e,t){const[n,r]=e;return[n,[...r,t]]}function bu(e,t){const n=e[1];for(const r of n){if(t(r,r[0].type))return!0}return!1}function wu(e){const t=Sa(ba);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function Su(e){const[t,n]=e;let r=JSON.stringify(t);function s(e){"string"==typeof r?r="string"==typeof e?r+e:[wu(r),e]:r.push("string"==typeof e?wu(e):e)}for(const o of n){const[e,t]=o;if(s(`\n${JSON.stringify(e)}\n`),"string"==typeof t||t instanceof Uint8Array)s(t);else{let e;try{e=JSON.stringify(t)}catch(i){e=JSON.stringify(gu(t))}s(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}(r)}function xu(e){const t="string"==typeof e.data?wu(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Tu={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function ku(e){return Tu[e]}function Eu(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Ou(e,t,n,r){const s=Eu(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n?.sdk);const o=function(e,t,n,r){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:lu(r)},...s&&{trace:s}}}(e,s,r,t);delete e.sdkProcessingMetadata;return yu(o,[[{type:i},e]])}var Cu;function Pu(e){return new ju((t=>{t(e)}))}function Ru(e){return new ju(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Cu||(Cu={}));let Iu,$u,Au,ju=class e{constructor(e){this._state=Cu.PENDING,this._handlers=[],this._runExecutor(e)}then(t,n){return new e(((e,r)=>{this._handlers.push([!1,n=>{if(t)try{e(t(n))}catch(s){r(s)}else e(n)},t=>{if(n)try{e(n(t))}catch(s){r(s)}else r(t)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(t){return new e(((e,n)=>{let r,s;return this.then((e=>{s=!1,r=e,t&&t()}),(e=>{s=!0,r=e,t&&t()})).then((()=>{s?n(r):e(r)}))}))}_executeHandlers(){if(this._state===Cu.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Cu.RESOLVED&&e[1](this._value),this._state===Cu.REJECTED&&e[2](this._value),e[0]=!0)}))}_runExecutor(e){const t=(e,t)=>{this._state===Cu.PENDING&&(ja(t)?t.then(n,r):(this._state=e,this._value=t,this._executeHandlers()))},n=e=>{t(Cu.RESOLVED,e)},r=e=>{t(Cu.REJECTED,e)};try{e(n,r)}catch(s){r(s)}}};function Du(e,t,n,r=0){return new ju(((s,i)=>{const o=e[r];if(null===t||"function"!=typeof o)s(t);else{const a=o({...t},n);ya&&o.id&&null===a&&za.log(`Event processor "${o.id}" dropped event`),ja(a)?a.then((t=>Du(e,t,n,r+1).then(s))).then(null,i):Du(e,a,n,r+1).then(s).then(null,i)}}))}function Nu(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra});Object.keys(r).length&&(e.tags={...r,...e.tags});Object.keys(s).length&&(e.user={...s,...e.user});Object.keys(i).length&&(e.contexts={...i,...e.contexts});o&&(e.level=o);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:Nc(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:fu(t),...e.sdkProcessingMetadata};const n=Fc(t),r=Bc(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function Lu(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:h,transactionName:p,span:f}=t;Mu(e,"extra",n),Mu(e,"tags",r),Mu(e,"user",s),Mu(e,"contexts",i),e.sdkProcessingMetadata=hc(e.sdkProcessingMetadata,a,2),o&&(e.level=o),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function Mu(e,t,n){e[t]=hc(e[t],n,1)}function Uu(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||nc(),timestamp:t.timestamp||cc()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||n||au,!e.release&&r&&(e.release=r);!e.dist&&s&&(e.dist=s);const o=e.request;o?.url&&(o.url=Wa(o.url,i))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),s&&s.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=function(e){const t=ba._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Au&&n.length===$u||($u=n.length,Au=n.reduce(((n,r)=>{Iu||(Iu={});const s=Iu[r];if(s)n[s[0]]=s[1];else{const s=e(r);for(let e=s.length-1;e>=0;e--){const i=s[e],o=i?.filename,a=t[r];if(o&&a){n[o]=a,Iu[r]=[o,a];break}}}return n}),{})),Au}(t);e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.filename&&(e.debug_id=n[e.filename])}))}))}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new yc;return n.update(t),n}(r,n.captureContext);n.mechanism&&oc(c,n.mechanism);const d=s?s.getEventProcessors():[],h=xa("globalScope",(()=>new yc)).getScopeData();if(i){Lu(h,i.getScopeData())}if(l){Lu(h,l.getScopeData())}const p=[...n.attachments||[],...h.attachments];p.length&&(n.attachments=p),Nu(c,h);return Du([...d,...h.eventProcessors],c,n).then((e=>(e&&function(e){const t={};if(e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))})),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof o&&o>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:gu(e.data,t,n)}})))},...e.user&&{user:gu(e.user,t,n)},...e.contexts&&{contexts:gu(e.contexts,t,n)},...e.extra&&{extra:gu(e.extra,t,n)}};e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=gu(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:gu(e.data,t,n)}}))));e.contexts?.flags&&r.contexts&&(r.contexts.flags=gu(e.contexts.flags,3,n));return r}(e,o,a):e)))}function Bu(e){if(e)return function(e){return e instanceof yc||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>qu.includes(e)))}(e)?{captureContext:e}:e}const qu=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Fu(e,t){return kc().captureEvent(e,t)}function Hu(e,t){Ec().setContext(e,t)}function zu(e){const t=Ec(),n=kc(),{userAgent:r}=ba.navigator||{},s=lc({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return"ok"===i?.status&&dc(i,{status:"exited"}),Wu(),t.setSession(s),s}function Wu(){const e=Ec(),t=kc().getSession()||e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),dc(e,n)}(t),Gu(),e.setSession()}function Gu(){const e=Ec(),t=Oc(),n=e.getSession();n&&t&&t.captureSession(n)}function Ju(e=!1){e?Wu():Gu()}function Vu(e,t,n){return t||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:"7"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}const Ku=[];function Yu(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;return function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(r)}function Xu(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Qu(e,t,n){if(n[t.name])ya&&za.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Ku.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),Ku.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}ya&&za.log(`Integration installed: ${t.name}`)}}function Zu(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch(n){}return t}const el="Not capturing exception because it's already been captured.",tl="Discarded session because of missing or non-string release",nl=Symbol.for("SentryInternalError"),rl=Symbol.for("SentryDoNotSendEventError");function sl(e){return{message:e,[nl]:!0}}function il(e){return{message:e,[rl]:!0}}function ol(e){return!!e&&"object"==typeof e&&nl in e}function al(e){return!!e&&"object"==typeof e&&rl in e}class cl{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=hu(e.dsn):ya&&za.warn("No DSN provided, client will not send events."),this._dsn){const t=Vu(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const r=nc();if(ac(e))return ya&&za.log(el),r;const s={event_id:r,...t};return this._process(this.eventFromException(e,s).then((e=>this._captureEvent(e,s,n)))),s.event_id}captureMessage(e,t,n,r){const s={event_id:nc(),...n},i=Ra(e)?e:String(e),o=Ia(e)?this.eventFromMessage(i,t,s):this.eventFromException(e,s);return this._process(o.then((e=>this._captureEvent(e,s,r)))),s.event_id}captureEvent(e,t,n){const r=nc();if(t?.originalException&&ac(t.originalException))return ya&&za.log(el),r;const s={event_id:r,...t},i=e.sdkProcessingMetadata||{},o=i.capturedSpanScope,a=i.capturedSpanIsolationScope;return this._process(this._captureEvent(e,s,o||n,a)),s.event_id}captureSession(e){this.sendSession(e),dc(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Pu(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Qu(this,e,this._integrations),t||Xu(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Ou(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of t.attachments||[])n=vu(n,xu(s));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const{release:t,environment:n=au}=this._options;if("aggregates"in e){const r=e.attrs||{};if(!r.release&&!t)return void(ya&&za.warn(tl));r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t)return void(ya&&za.warn(tl));e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);const r=function(e,t,n,r){const s=Eu(n);return yu({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:lu(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){const r=`${e}:${t}`;ya&&za.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(ya&&za.error("Error while sending envelope:",e),e))):(ya&&za.error("Transport disabled"),Pu({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Qu(e,t,n)})),n}(this,e),Xu(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1;const s=t.exception?.values;if(s){r=!0;for(const e of s){const t=e.mechanism;if(!1===t?.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(dc(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ju((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){const s=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i?.length&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),Uu(s,e,t,n,this,r).then((e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:Cc(n),...e.contexts};const r=function(e,t){const n=t.getPropagationContext();return n.dsc||pu(n.traceId,e)}(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:r,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},n=kc(),r=Ec()){return ya&&ul(e)&&za.log(`Captured error event \`${Zu(e)[0]||"<unknown>"}\``),this._processEvent(e,t,n,r).then((e=>e.event_id),(e=>{ya&&(al(e)?za.log(e.message):ol(e)?za.warn(e.message):za.warn(e))}))}_processEvent(e,t,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=ll(e),a=ul(e),c=e.type||"error",u=`before send for type \`${c}\``,l=void 0===i?void 0:function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(i);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),Ru(il(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const d="replay_event"===c?"replay":c;return this._prepareEvent(e,t,n,r).then((e=>{if(null===e)throw this.recordDroppedEvent("event_processor",d),il("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const n=function(e,t,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o}=t;let a=n;if(ul(a)&&s)return s(a,r);if(ll(a)){if(o){const e=o(function(e){const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:i,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o?.[Pc],exclusive_time:o?.[Rc],measurements:e.measurements,is_segment:!0}}(a));if(e?a=hc(n,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[Pc]:c.profile_id},...c.exclusive_time&&{[Rc]:c.exclusive_time}}}},measurements:c.measurements}):Hc(),a.spans){const e=[];for(const t of a.spans){const n=o(t);n?e.push(n):(Hc(),e.push(t))}a.spans=e}}if(i){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(a,r)}}var c;return a}(0,s,e,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(ja(e))return e.then((e=>{if(!$a(e)&&null!==e)throw sl(n);return e}),(e=>{throw sl(`${t} rejected with ${e}`)}));if(!$a(e)&&null!==e)throw sl(n);return e}(n,u)})).then((s=>{if(null===s){if(this.recordDroppedEvent("before_send",d),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw il(`${u} returned \`null\`, will not send event.`)}const i=n.getSession()||r.getSession();if(a&&i&&this._updateSessionFromEvent(i,s),o){const e=(s.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=s.transaction_info;if(o&&c&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...c,source:e}}return this.sendEvent(s,t),s})).then(null,(e=>{if(al(e)||ol(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),sl(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){ya&&za.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(ya&&za.log("No outcomes to send"));if(!this._dsn)return void(ya&&za.log("No dsn provided, will not send outcomes"));ya&&za.log("Sending outcomes:",e);const t=(n=e,yu((r=this._options.tunnel&&lu(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:s||cc(),discarded_events:n}]]));var n,r,s;this.sendEnvelope(t)}}function ul(e){return void 0===e.type}function ll(e){return"transaction"===e.type}function dl(e,t){const n=t??function(e){return ba._sentryClientToLogBufferMap?.get(e)}(e)??[];if(0===n.length)return;const r=e.getOptions(),s=function(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=lu(r)),yu(s,[(i=e,[{type:"log",item_count:i.length,content_type:"application/vnd.sentry.items.log+json"},{items:i}])]);var i}(n,r._metadata,r.tunnel,e.getDsn());ba._sentryClientToLogBufferMap?.set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function hl(e,t){!0===t.debug&&(ya?za.enable():Ha((()=>{})));kc().update(t.initialScope);const n=new e(t);return function(e){kc().setClient(e)}(n),n.init(),n}ba._sentryClientToLogBufferMap=new WeakMap;const pl=Symbol.for("SentryBufferFullError");function fl(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Ru(pl);const s=r();return-1===t.indexOf(s)&&t.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(e){return new ju(((n,r)=>{let s=t.length;if(!s)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Pu(e).then((()=>{--s||(clearTimeout(i),n(!0))}),r)}))}))}}}function gl(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(i)for(const a of i.trim().split(",")){const[e,t,,,n]=a.split(":",5),i=parseInt(e,10),o=1e3*(isNaN(i)?60:i);if(t)for(const a of t.split(";"))"metric_bucket"===a&&n&&!n.split(";").includes("custom")||(s[a]=r+o);else s.all=r+o}else o?s.all=r+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(o,r):429===t&&(s.all=r+6e4);return s}function ml(e,t,n=fl(e.bufferSize||64)){let r={};return{send:function(s){const i=[];if(bu(s,((t,n)=>{const s=ku(n);!function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,s)?i.push(t):e.recordDroppedEvent("ratelimit_backoff",s)})),0===i.length)return Pu({});const o=yu(s[0],i),a=t=>{bu(o,((n,r)=>{e.recordDroppedEvent(t,ku(r))}))};return n.add((()=>t({body:Su(o)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&ya&&za.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=gl(r,e),e)),(e=>{throw a("network_error"),ya&&za.error("Encountered error running transport request:",e),e})))).then((e=>e),(e=>{if(e===pl)return ya&&za.error("Skipped sending event because buffer is full."),a("queue_overflow"),Pu({});throw e}))},flush:e=>n.drain(e)}}function _l(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function yl(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function vl(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:va}))),version:va}),e._metadata=s}const bl=100;function wl(e,t){const n=Oc(),r=Ec();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=bl}=n.getOptions();if(i<=0)return;const o={timestamp:cc(),...e},a=s?Ha((()=>s(o,t))):o;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,i))}let Sl;const xl=new WeakMap,Tl=()=>({name:"FunctionToString",setupOnce(){Sl=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Qa(this),n=xl.has(Oc())&&void 0!==t?t:this;return Sl.apply(n,e)}}catch{}},setup(e){xl.set(e,!0)}}),kl=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],El=(e={})=>{let t;return{name:"EventFilters",setup(n){const r=n.getOptions();t=Cl(e,r)},processEvent(n,r,s){if(!t){const n=s.getOptions();t=Cl(e,n)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;const n=e.transaction;return!!n&&Va(n,t)}(e,t.ignoreTransactions))return ya&&za.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${sc(e)}`),!0}else{if(function(e,t){if(!t?.length)return!1;return Zu(e).some((e=>Va(e,t)))}(e,t.ignoreErrors))return ya&&za.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${sc(e)}`),!0;if(function(e){if(!e.exception?.values?.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return ya&&za.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${sc(e)}`),!0;if(function(e,t){if(!t?.length)return!1;const n=Pl(e);return!!n&&Va(n,t)}(e,t.denyUrls))return ya&&za.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${sc(e)}.\nUrl: ${Pl(e)}`),!0;if(!function(e,t){if(!t?.length)return!0;const n=Pl(e);return!n||Va(n,t)}(e,t.allowUrls))return ya&&za.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${sc(e)}.\nUrl: ${Pl(e)}`),!0}return!1}(n,t)?null:n}}},Ol=(e={})=>({...El(e),name:"InboundFilters"});function Cl(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:kl],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Pl(e){try{const t=[...e.exception?.values??[]].reverse().find((e=>void 0===e.mechanism?.parent_id&&e.stacktrace?.frames?.length)),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch(t){return ya&&za.error(`Cannot extract url for event ${sc(e)}`),null}}function Rl(e,t,n,r,s,i){if(!s.exception?.values||!i||!Da(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=Il(e,t,r,i.originalException,n,s.exception.values,o,0))}function Il(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(Da(r[s],Error)){$l(o,a);const i=e(t,r[s]),u=c.length;Al(i,s,u,a),c=Il(e,t,n,r[s],s,[i,...c],i,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(Da(r,Error)){$l(o,a);const u=e(t,r),l=c.length;Al(u,`errors[${i}]`,l,a),c=Il(e,t,n,r,s,[u,...c],u,l)}})),c}function $l(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Al(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function jl(){"console"in ba&&qa.forEach((function(e){e in ba.console&&Ka(ba.console,e,(function(t){return Fa[e]=t,function(...t){nu("console",{args:t,level:e});const n=Fa[e];n?.apply(ba.console,t)}}))}))}function Dl(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const Nl=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Ml(e,t))return!1;if(!Ll(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Ul(t),r=Ul(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Ml(e,t))return!1;if(!Ll(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return ya&&za.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(n){}return e=t}}};function Ll(e,t){let n=Xc(e),r=Xc(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++){const e=r[s],t=n[s];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function Ml(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(s){return!1}}function Ul(e){return e.exception?.values&&e.exception.values[0]}function Bl(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function ql(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}const Fl=ba;function Hl(){if(!("fetch"in Fl))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function zl(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Wl(e,t){const n="fetch";eu(n,e),tu(n,(()=>function(e,t=!1){if(t&&!function(){if("string"==typeof EdgeRuntime)return!0;if(!Hl())return!1;if(zl(Fl.fetch))return!0;let e=!1;const t=Fl.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=zl(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){ya&&za.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}())return;Ka(ba,"fetch",(function(t){return function(...n){const r=new Error,{method:s,url:i}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Jl(t),method:Gl(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Jl(t),method:Gl(t,"method")?String(t.method).toUpperCase():"GET"}}(n),o={args:n,fetchData:{method:s,url:i},startTimestamp:1e3*uc(),virtualError:r,headers:Vl(n)};return e||nu("fetch",{...o}),t.apply(ba,n).then((async t=>(e?e(t):nu("fetch",{...o,endTimestamp:1e3*uc(),response:t}),t)),(e=>{if(nu("fetch",{...o,endTimestamp:1e3*uc(),error:e}),ka(e)&&void 0===e.stack&&(e.stack=r.stack,Ya(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(o.fetchData.url);e.message=`${e.message} (${t.host})`}catch{}throw e}))}}))}(void 0,t)))}function Gl(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Jl(e){return"string"==typeof e?e:e?Gl(e,"url")?e.url:e.toString?e.toString():"":""}function Vl(e){const[t,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(r=t,"undefined"!=typeof Request&&Da(r,Request))return new Headers(t.headers)}catch{}var r}const Kl=ba;let Yl=0;function Xl(){return Yl>0}function Ql(e,t={}){if(!function(e){return"function"==typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(Qa(e))return e}catch(r){return e}const n=function(...n){try{const r=n.map((e=>Ql(e,t)));return e.apply(this,r)}catch(r){throw Yl++,setTimeout((()=>{Yl--})),function(...e){const t=Tc(wa());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}t.withScope(e[0])}((e=>{var s,i;e.addEventProcessor((e=>(t.mechanism&&(ic(e,void 0,void 0),oc(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),s=r,kc().captureException(s,Bu(i))})),r}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch{}Xa(n,e),Ya(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch{}return n}function Zl(e,t){const n=nd(e,t),r={type:id(t),value:od(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function ed(e,t,n,r){const s=Oc(),i=s?.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:mu(t,i)};if(o)return{exception:{values:[Zl(e,o)]},extra:a};const c={exception:{values:[{type:Aa(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:ud(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=nd(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function td(e,t){return{exception:{values:[Zl(e,t)]}}}function nd(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&rd.test(e.message))return 1;return 0}(t),s=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,s)}catch(i){}return[]}const rd=/Minified React error #\d+;/i;function sd(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function id(e){const t=e?.name;if(!t&&sd(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function od(e){const t=e?.message;return sd(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ad(e,t,n,r,s){let i;if(Oa(t)&&t.error){return td(e,t.error)}if(Ca(t)||Ea(t,"DOMException")){const s=t;if("stack"in t)i=td(e,t);else{const t=s.name||(Ca(s)?"DOMError":"DOMException"),o=s.message?`${t}: ${s.message}`:t;i=cd(e,o,n,r),ic(i,o)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}if(ka(t))return td(e,t);if($a(t)||Aa(t)){return i=ed(e,t,n,s),oc(i,{synthetic:!0}),i}return i=cd(e,t,n,r),ic(i,`${t}`,void 0),oc(i,{synthetic:!0}),i}function cd(e,t,n,r){const s={};if(r&&n){const r=nd(e,n);r.length&&(s.exception={values:[{value:t,stacktrace:{frames:r}}]}),oc(s,{synthetic:!0})}if(Ra(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s}function ud(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Za(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Wa(r,t);for(let s=n.length;s>0;s--){const e=n.slice(0,s).join(", ");if(!(e.length>t))return s===n.length?e:Wa(e,t)}return""}(e),r=t?"promise rejection":"exception";if(Oa(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(Aa(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(t){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}class ld extends cl{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};vl(t,"browser",["browser"],Kl.SENTRY_SDK_SOURCE||"npm"),super(t);const n=this,{sendDefaultPii:r,_experiments:s}=n._options,i=s?.enableLogs;t.sendClientReports&&Kl.document&&Kl.document.addEventListener("visibilitychange",(()=>{"hidden"===Kl.document.visibilityState&&(this._flushOutcomes(),i&&dl(n))})),i&&(n.on("flush",(()=>{dl(n)})),n.on("afterCaptureLog",(()=>{n._logFlushIdleTimeout&&clearTimeout(n._logFlushIdleTimeout),n._logFlushIdleTimeout=setTimeout((()=>{dl(n)}),5e3)}))),r&&(n.on("postprocessEvent",_l),n.on("beforeSendSession",yl))}eventFromException(e,t){return function(e,t,n,r){const s=ad(e,t,n?.syntheticException||void 0,r);return oc(s),s.level="error",n?.event_id&&(s.event_id=n.event_id),Pu(s)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,s){const i=cd(e,t,r?.syntheticException||void 0,s);return i.level=n,r?.event_id&&(i.event_id=r.event_id),Pu(i)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,r)}}const dd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,hd=ba;let pd,fd,gd,md;function _d(){if(!hd.document)return;const e=nu.bind(null,"dom"),t=yd(e,!0);hd.document.addEventListener("click",t,!1),hd.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=hd,r=n[t]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Ka(r,"addEventListener",(function(t){return function(n,r,s){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},i=r[n]=r[n]||{refCount:0};if(!i.handler){const r=yd(e);i.handler=r,t.call(this,n,r,s)}i.refCount++}catch(i){}return t.call(this,n,r,s)}})),Ka(r,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},s=n[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(s){}return e.call(this,t,n,r)}})))}))}function yd(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(t){return null}}(n);if(function(e,t){return"keypress"===e&&(!t?.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;Ya(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ya(r,"_sentryId",nc());const s="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==fd)return!1;try{if(!e.target||e.target._sentryId!==gd)return!1}catch(t){}return!0}(n)){e({event:n,name:s,global:t}),fd=n.type,gd=r?r._sentryId:void 0}clearTimeout(pd),pd=hd.setTimeout((()=>{gd=void 0,fd=void 0}),1e3)}}function vd(e){const t="history";eu(t,e),tu(t,bd)}function bd(){function e(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const r=md,s=function(e){try{return new URL(e,hd.location.origin).toString()}catch{return e}}(String(n));if(md=s,r===s)return e.apply(this,t);nu("history",{from:r,to:s})}return e.apply(this,t)}}hd.addEventListener("popstate",(()=>{const e=hd.location.href,t=md;if(md=e,t===e)return;nu("history",{from:t,to:e})})),"history"in Fl&&Fl.history&&(Ka(hd.history,"pushState",e),Ka(hd.history,"replaceState",e))}const wd={};function Sd(e){wd[e]=void 0}const xd="__sentry_xhr_v3__";function Td(){if(!hd.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=new Error,s=1e3*uc(),i=Pa(n[0])?n[0].toUpperCase():void 0,o=function(e){if(Pa(e))return e;try{return e.toString()}catch{}return}(n[1]);if(!i||!o)return e.apply(t,n);t[xd]={method:i,url:o,request_headers:{}},"POST"===i&&o.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[xd];if(e&&4===t.readyState){try{e.status_code=t.status}catch(n){}nu("xhr",{endTimestamp:1e3*uc(),startTimestamp:s,xhr:t,virtualError:r})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(a(),e.apply(t,n))}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,s]=n,i=t[xd];return i&&Pa(r)&&Pa(s)&&(i.request_headers[r.toLowerCase()]=s),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[xd];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return nu("xhr",{startTimestamp:1e3*uc(),xhr:t}),e.apply(t,n)}})}function kd(e,t=function(e){const t=wd[e];if(t)return t;let n=hd[e];if(zl(n))return wd[e]=n.bind(hd);const r=hd.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const s=t.contentWindow;s?.[e]&&(n=s[e]),r.head.removeChild(t)}catch(s){dd&&za.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n?wd[e]=n.bind(hd):n}("fetch")){let n=0,r=0;return ml(e,(function(s){const i=s.body.length;n+=i,r++;const o={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Sd("fetch"),Ru("No fetch implementation available");try{return t(e.url,o).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(a){return Sd("fetch"),n-=i,r--,Ru(a)}}))}function Ed(e,t,n,r){const s={filename:e,function:"<anonymous>"===t?zc:t,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==r&&(s.colno=r),s}const Od=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Cd=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Pd=/\((\S*)(?::(\d+))(?::(\d+))\)/,Rd=[30,e=>{const t=Od.exec(e);if(t){const[,e,n,r]=t;return Ed(e,zc,+n,+r)}const n=Cd.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=Pd.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Dd(n[1]||zc,n[2]);return Ed(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],Id=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ad=[50,e=>{const t=Id.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=$d.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||zc;return[n,e]=Dd(n,e),Ed(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],jd=Jc(...[Rd,Ad]),Dd=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:zc,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Nd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ld=1024,Md=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){var n;t.console&&function(e){const t="console";eu(t,e),tu(t,jl)}(function(e){return function(t){if(Oc()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Dl(t.level),message:Ga(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Ga(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}wl(n,{input:t.args,level:t.level})}}(e)),t.dom&&(n=function(e,t){return function(n){if(Oc()!==e)return;let r,s,i="object"==typeof t?t.serializeAttribute:void 0,o="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;o&&o>Ld&&(Nd&&za.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=Ld),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Ma(t,{keyAttrs:i,maxStringLength:o}),s=function(e){if(!La.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(t)}catch(c){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};s&&(a.data={"ui.component_name":s}),wl(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom),eu("dom",n),tu("dom",_d)),t.xhr&&function(e){eu("xhr",e),tu("xhr",Td)}(function(e){return function(t){if(Oc()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,s=t.xhr[xd];if(!n||!r||!s)return;const{method:i,url:o,status_code:a,body:c}=s,u={method:i,url:o,status_code:a},l={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r},d={category:"xhr",data:u,type:"http",level:ql(a)};e.emit("beforeOutgoingRequestBreadcrumb",d,l),wl(d,l)}}(e)),t.fetch&&Wl(function(e){return function(t){if(Oc()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const s=t.fetchData,i={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},o={category:"fetch",data:s,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",o,i),wl(o,i)}else{const s=t.response,i={...t.fetchData,status_code:s?.status};t.fetchData.request_body_size,t.fetchData.response_body_size;const o={input:t.args,response:s,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:i,type:"http",level:ql(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",a,o),wl(a,o)}}}(e)),t.history&&vd(function(e){return function(t){if(Oc()!==e)return;let n=t.from,r=t.to;const s=Bl(Kl.location.href);let i=n?Bl(n):void 0;const o=Bl(r);i?.path||(i=s),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),s.protocol===i.protocol&&s.host===i.host&&(n=i.relative),wl({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){Oc()===e&&wl({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:sc(t)},{event:t})}}(e))}}};const Ud=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Bd=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&Ka(Kl,"setTimeout",qd),t.setInterval&&Ka(Kl,"setInterval",qd),t.requestAnimationFrame&&Ka(Kl,"requestAnimationFrame",Fd),t.XMLHttpRequest&&"XMLHttpRequest"in Kl&&Ka(XMLHttpRequest.prototype,"send",Hd);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Ud).forEach(zd)}}}};function qd(e){return function(...t){const n=t[0];return t[0]=Ql(n,{mechanism:{data:{function:Yc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Fd(e){return function(t){return e.apply(this,[Ql(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Yc(e)},handled:!1,type:"instrument"}})])}}function Hd(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&Ka(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Yc(t)},handled:!1,type:"instrument"}},r=Qa(t);return r&&(n.mechanism.data.handler=Yc(r)),Ql(t,n)}))})),e.apply(this,t)}}function zd(e){const t=Kl,n=t[e]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(Ka(n,"addEventListener",(function(t){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ql(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Yc(r),target:e},handled:!1,type:"instrument"}}))}catch{}return t.apply(this,[n,Ql(r,{mechanism:{data:{function:"addEventListener",handler:Yc(r),target:e},handled:!1,type:"instrument"}}),s])}})),Ka(n,"removeEventListener",(function(e){return function(t,n,r){try{const s=n.__sentry_wrapped__;s&&e.call(this,t,s,r)}catch(s){}return e.call(this,t,n,r)}})))}const Wd=()=>({name:"BrowserSession",setupOnce(){void 0!==Kl.document?(zu({ignoreDuration:!0}),Ju(),vd((({from:e,to:t})=>{void 0!==e&&e!==t&&(zu({ignoreDuration:!0}),Ju())}))):Nd&&za.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),Gd=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){!function(e){const t="error";eu(t,e),tu(t,su)}((t=>{const{stackParser:n,attachStacktrace:r}=Vd();if(Oc()!==e||Xl())return;const{msg:s,url:i,line:o,column:a,error:c}=t,u=function(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=Pa(t)&&t.length>0?t:Ba();0===c.length&&c.push({colno:u,filename:d,function:zc,in_app:!0,lineno:l});return e}(ad(n,c||s,void 0,r,!1),i,o,a);u.level="error",Fu(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),Jd("onerror")),t.onunhandledrejection&&(!function(e){!function(e){const t="unhandledrejection";eu(t,e),tu(t,ou)}((t=>{const{stackParser:n,attachStacktrace:r}=Vd();if(Oc()!==e||Xl())return;const s=function(e){if(Ia(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),i=Ia(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:ad(n,s,void 0,r,!0);i.level="error",Fu(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Jd("onunhandledrejection"))}}};function Jd(e){Nd&&za.log(`Global Handler attached: ${e}`)}function Vd(){const e=Oc();return e?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Kd=()=>({name:"HttpContext",preprocessEvent(e){if(!Kl.navigator&&!Kl.location&&!Kl.document)return;const t=function(){const e=Ba(),{referrer:t}=Kl.document||{},{userAgent:n}=Kl.navigator||{};return{url:e,headers:{...t&&{Referer:t},...n&&{"User-Agent":n}}}}(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),Yd=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,s){Rl(Zl,s.getOptions().stackParser,n,t,e,r)}}};function Xd(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const r=n;void 0!==e[r]&&(t[r]=e[r])}return t}function Qd(e={}){const t=function(e={}){return{defaultIntegrations:[Ol(),Tl(),Bd(),Md(),Gd(),Yd(),Nl(),Kd(),Wd()],release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Kl.SENTRY_RELEASE?.id,sendClientReports:!0,...Xd(e)}}(e);if(!t.skipBrowserExtensionCheck&&function(){const e=void 0!==Kl.window&&Kl;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t?.runtime?.id,r=Ba()||"",s=!!n&&Kl===Kl.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),i=void 0!==e.nw;return!!n&&!s&&!i}())return void(Nd&&Ha((()=>{})));Nd&&!Hl()&&za.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:(r=t.stackParser||jd,Array.isArray(r)?Jc(...r):r),integrations:Yu(t),transport:t.transport||kd};var r;return hl(ld,n)}const Zd=Object.prototype.toString;function eh(e,t){return Zd.call(e)===`[object ${t}]`}function th(e){return eh(e,"String")}function nh(e){return eh(e,"Object")}function rh(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function sh(e,t){try{return e instanceof t}catch(n){return!1}}function ih(e,t,n=!1){return!!th(e)&&(eh(t,"RegExp")?t.test(e):!!th(t)&&(n?e===t:e.includes(t)))}function oh(e){return e&&e.Math==Math?e:void 0}const ah="object"==typeof globalThis&&oh(globalThis)||"object"==typeof window&&oh(window)||"object"==typeof self&&oh(self)||"object"==typeof global&&oh(global)||function(){return this}()||{};function ch(){return ah}function uh(e,t,n){const r=n||ah,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const lh=ch();function dh(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(u=hh(n,l),!("html"===u||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch(n){return"<unknown>"}}function hh(e,t){const n=e,r=[];let s,i,o,a,c;if(!n||!n.tagName)return"";if(lh.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&th(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function ph(e){if(!lh.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const fh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,gh=["debug","info","warn","error","log","assert","trace"],mh={};function _h(e){if(!("console"in ah))return e();const t=ah.console,n={},r=Object.keys(mh);r.forEach((e=>{const r=mh[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const yh=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return fh?gh.forEach((n=>{t[n]=(...t)=>{e&&_h((()=>{ah.console[n](`Sentry Logger [${n}]:`,...t)}))}})):gh.forEach((e=>{t[e]=()=>{}})),t}();function vh(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);"function"==typeof s&&function(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,bh(e,"__sentry_original__",t)}catch(n){}}(s,r),e[t]=s}function bh(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(r){fh&&yh.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function wh(e){return Sh(e,new Map)}function Sh(e,t){if(function(e){if(!nh(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(t){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const s of Object.keys(e))void 0!==e[s]&&(r[s]=Sh(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(Sh(e,t))})),r}return e}const xh="<anonymous>";function Th(e){try{return e&&"function"==typeof e&&e.name||xh}catch(t){return xh}}const kh={},Eh={};function Oh(e,t){kh[e]=kh[e]||[],kh[e].push(t)}function Ch(e,t){Eh[e]||(t(),Eh[e]=!0)}function Ph(e,t){const n=e&&kh[e];if(n)for(const s of n)try{s(t)}catch(r){fh&&yh.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Th(s)}\nError:`,r)}}function Rh(){const e=ah,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(r){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}const Ih=ch();function $h(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ah(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Ih))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if($h(Ih.fetch))return!0;let e=!1;const t=Ih.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=$h(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){fh&&yh.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function jh(){Ah()&&vh(ah,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Nh(t),method:Dh(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Nh(t),method:Dh(t,"method")?String(t.method).toUpperCase():"GET"}}(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Ph("fetch",{...s}),e.apply(ah,t).then((e=>(Ph("fetch",{...s,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Ph("fetch",{...s,endTimestamp:Date.now(),error:e}),e}))}}))}function Dh(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Nh(e){return"string"==typeof e?e:e?Dh(e,"url")?e.url:e.toString?e.toString():"":""}let Lh=null;function Mh(){Lh=ah.onerror,ah.onerror=function(e,t,n,r,s){return Ph("error",{column:r,error:s,line:n,msg:e,url:t}),!(!Lh||Lh.__SENTRY_LOADER__)&&Lh.apply(this,arguments)},ah.onerror.__SENTRY_INSTRUMENTED__=!0}let Uh=null;function Bh(){Uh=ah.onunhandledrejection,ah.onunhandledrejection=function(e){return Ph("unhandledrejection",e),!(Uh&&!Uh.__SENTRY_LOADER__)||Uh.apply(this,arguments)},ah.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const qh=ch();const Fh=ah;let Hh;function zh(){if(!function(){const e=qh.chrome,t=e&&e.app&&e.app.runtime,n="history"in qh&&!!qh.history.pushState&&!!qh.history.replaceState;return!t&&n}())return;const e=Fh.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Hh,t=String(n);Hh=t;Ph("history",{from:e,to:t})}return e.apply(this,t)}}Fh.onpopstate=function(...t){const n=Fh.location.href,r=Hh;Hh=n;if(Ph("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(s){}},vh(Fh.history,"pushState",t),vh(Fh.history,"replaceState",t)}const Wh=ah,Gh="__sentry_xhr_v3__";function Jh(){if(!Wh.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;vh(e,"open",(function(e){return function(...t){const n=Date.now(),r=th(t[0])?t[0].toUpperCase():void 0,s=function(e){if(th(e))return e;try{return e.toString()}catch(t){}return}(t[1]);if(!r||!s)return e.apply(this,t);this[Gh]={method:r,url:s,request_headers:{}},"POST"===r&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[Gh];if(e&&4===this.readyState){try{e.status_code=this.status}catch(t){}Ph("xhr",{args:[r,s],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?vh(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),vh(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,s=this[Gh];return s&&th(n)&&th(r)&&(s.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),vh(e,"send",(function(e){return function(...t){const n=this[Gh];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Ph("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Vh(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Kh(e,t){return e.require(t)}var Yh;!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Yh||(Yh={}));class Xh{constructor(e){Xh.prototype.__init.call(this),Xh.prototype.__init2.call(this),Xh.prototype.__init3.call(this),Xh.prototype.__init4.call(this),this._state=Yh.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new Xh(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(s){r(s)}else n(t)},e=>{if(t)try{n(t(e))}catch(s){r(s)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Xh(((t,n)=>{let r,s;return this.then((t=>{s=!1,r=t,e&&e()}),(t=>{s=!0,r=t,e&&e()})).then((()=>{s?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Yh.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Yh.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Yh.PENDING&&(rh(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Yh.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Yh.RESOLVED&&e[1](this._value),this._state===Yh.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Qh(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Zh(){return Date.now()/1e3}const ep=function(){const{performance:e}=ah;if(!e||!e.now)return Zh;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),tp=(()=>{const{performance:e}=ah;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=e.timing&&e.timing.navigationStart,a="number"==typeof o?Math.abs(o+n-r):t;return i||a<t?s<=a?e.timeOrigin:o:r})(),np="baggage",rp="sentry-",sp=/^sentry-/;function ip(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,i=0===r?s:`${e},${s}`;return i.length>8192?(fh&&yh.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):i}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${rp}${t}`]=n),e)),{}))}function op(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const ap=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function cp(e,t){const n=function(e){if(!e)return;const t=e.match(ap);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),r=function(e){if(!th(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=op(t);for(const r of Object.keys(n))e[r]=n[r];return e}),{});else{if(!e)return;t=op(e)}const n=Object.entries(t).reduce(((e,[t,n])=>(t.match(sp)&&(e[t.slice(7)]=n),e)),{});return Object.keys(n).length>0?n:void 0}(t),{traceId:s,parentSpanId:i,parentSampled:o}=n||{};return n?{traceId:s||Rh(),parentSpanId:i||Rh().substring(16),spanId:Rh().substring(16),sampled:o,dsc:r||{}}:{traceId:s||Rh(),spanId:Rh().substring(16)}}function up(e=Rh(),t=Rh().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}const lp="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,dp="production";function hp(e,t,n,r=0){return new Xh(((s,i)=>{const o=e[r];if(null===t||"function"!=typeof o)s(t);else{const a=o({...t},n);lp&&o.id&&null===a&&yh.log(`Event processor "${o.id}" dropped event`),rh(a)?a.then((t=>hp(e,t,n,r+1).then(s))).then(null,i):hp(e,a,n,r+1).then(s).then(null,i)}}))}function pp(e){const t=ep(),n={sid:Rh(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return wh({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&fp(n,e),n}function fp(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ep(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Rh()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function gp(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,tags:a,origin:c}=vp(e);return wh({data:r,op:s,parent_span_id:i,span_id:t,status:o,tags:a,trace_id:n,origin:c})}function mp(e){const{traceId:t,spanId:n}=e.spanContext();return up(t,n,bp(e))}function _p(e){return"number"==typeof e?yp(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?yp(e.getTime()):ep()}function yp(e){return e>9999999999?e/1e3:e}function vp(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function bp(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function wp(){return jp().getClient()}function Sp(){return jp().getScope()}function xp(e){return e.transaction}function Tp(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=wh({environment:r.environment||dp,release:r.release,user_segment:i,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function kp(e){const t=wp();if(!t)return{};const n=Tp(vp(e).trace_id||"",t,Sp()),r=xp(e);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:o}=r.metadata;null!=i&&(n.sample_rate=`${i}`);const a=vp(r);return o&&"url"!==o&&(n.transaction=a.description),n.sampled=String(bp(r)),t.emit&&t.emit("createDsc",n),n}function Ep(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t,c=wh(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=wh(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=wh(s);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=wh(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});o&&(e.level=o);a&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:gp(t),...e.contexts};const n=xp(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:kp(t),...e.sdkProcessingMetadata};const r=vp(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?function(e){return Array.isArray(e)?e:[e]}(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}class Op{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Cp()}static clone(e){return e?e.clone():new Op}clone(){const e=new Op;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&fp(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Op){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(nh(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Cp(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Zh(),...e},s=this._breadcrumbs;return s.push(r),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:s,_user:i,_level:o,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:h}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:s,user:i,level:o,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:h}}applyToEvent(e,t={},n=[]){Ep(e,this.getScopeData());return hp([...n,...uh("globalEventProcessors",(()=>[])),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Rh();if(!this._client)return yh.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Rh();if(!this._client)return yh.warn("No client configured on scope - will not capture message!"),r;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Rh();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(yh.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Cp(){return{traceId:Rh(),spanId:Rh().substring(16)}}const Pp=parseFloat("7.120.3"),Rp=100;class Ip{constructor(e,t,n,r=Pp){let s,i;this._version=r,t?s=t:(s=new Op,s.setClient(e)),n?i=n:(i=new Op,i.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(r){throw this.popScope(),r}return rh(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Rh(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Rh(),s=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Rh();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=Rp}=r.getOptions&&r.getOptions()||{};if(i<=0)return;const o={timestamp:Zh(),...e},a=s?_h((()=>s(o,t))):o;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,i))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Ap(this);try{e(this)}finally{Ap(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(n){return lp&&yh.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(lp&&!n){this.getClient()?yh.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):yh.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),fp(e,n)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:s=dp}=n&&n.getOptions()||{},{userAgent:i}=ah.navigator||{},o=pp({release:r,environment:s,user:t.getUser(),...i&&{userAgent:i},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&fp(a,{status:"exited"}),this.endSession(),t.setSession(o),o}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=$p().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);lp&&yh.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function $p(){return ah.__SENTRY__=ah.__SENTRY__||{extensions:{},hub:void 0},ah}function Ap(e){const t=$p(),n=Np(t);return Lp(t,e),n}function jp(){const e=$p();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=$p()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!Np(e).isOlderThan(Pp)||Lp(e,new Ip);var t;return Np(e)}(e)}function Dp(){return jp().getIsolationScope()}function Np(e){return uh("hub",(()=>new Ip),e)}function Lp(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function Mp(e){return(e||jp()).getScope().getTransaction()}let Up=!1;function Bp(){Up||(Up=!0,function(e){const t="error";Oh(t,e),Ch(t,Mh)}(qp),function(e){const t="unhandledrejection";Oh(t,e),Ch(t,Bh)}(qp))}function qp(){const e=Mp();if(e){const t="internal_error";lp&&yh.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var Fp;function Hp(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=function(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(t);"unknown_error"!==n&&e.setStatus(n)}function zp(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=wp(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Wp(e){if(!zp())return;const t=function(e){if(e.startTime){const t={...e};return t.startTimestamp=_p(e.startTime),delete t.startTime,t}return e}(e),n=jp(),r=e.scope?e.scope.getSpan():Sp().getSpan();if(e.onlyIfParent&&!r)return;const s=(e.scope||Sp()).clone();return function(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:s}){if(!zp())return;const i=Dp();let o;if(t&&!r)o=t.startChild(n);else if(t){const r=kp(t),{traceId:s,spanId:i}=t.spanContext(),a=bp(t);o=e.startTransaction({traceId:s,parentSpanId:i,parentSampled:a,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:a,sampled:c}={...i.getPropagationContext(),...s.getPropagationContext()};o=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return s.setSpan(o),function(e,t,n){e&&(bh(e,Jp,n),bh(e,Gp,t))}(o,s,i),o}(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:s})}qp.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Fp||(Fp={}));const Gp="_sentryScope",Jp="_sentryIsolationScope";const Vp="sentry.source",Kp="sentry.sample_rate",Yp="sentry.op",Xp="sentry.origin";class Qp{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Zp{constructor(e={}){this._traceId=e.traceId||Rh(),this._spanId=e.spanId||Rh().substring(16),this._startTime=e.startTimestamp||ep(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Xp]:e.origin||"manual",[Yp]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Yp]}set op(e){this.setAttribute(Yp,e)}get origin(){return this._attributes[Xp]}set origin(e){this.setAttribute(Xp,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new Zp({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=xp(this);if(t.transaction=n,lp&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${vp(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;yh.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Hp(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=xp(this);if(lp&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&yh.log(e.replace("Starting","Finishing"))}this._endTime=_p(e)}toTraceparent(){return mp(this)}toContext(){return wh({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return gp(this)}getSpanJSON(){return wh({data:this._getData(),description:this._name,op:this._attributes[Yp],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Xp],_metrics_summary:void 0,profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class ef extends Zp{constructor(e,t){super(e),this._contexts={},this._hub=t||jp(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Vp]&&{source:this._attributes[Vp]},...this._attributes[Kp]&&{sampleRate:this._attributes[Kp]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Vp,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Qp(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=_p(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return wh({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return kp(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(lp&&yh.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return lp&&yh.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&vp(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>vp(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:s}={scope:(i=this)[Gp],isolationScope:i[Jp]};var i;const{metadata:o}=this,{source:a}=o,c={contexts:{...this._contexts,trace:gp(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:r,capturedSpanIsolationScope:s,...wh({dynamicSamplingContext:kp(this)})},_metrics_summary:void 0,...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(lp&&yh.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),lp&&yh.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const tf={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},nf=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class rf extends Qp{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===vp(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class sf extends ef{constructor(e,t,n=tf.idleTimeout,r=tf.finalTimeout,s=tf.heartbeatInterval,i=!1,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=s,this._onScope=i,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=nf[4],this._autoFinishAllowed=!o,i&&(lp&&yh.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),o||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=nf[3],this.end())}),this._finalTimeout)}end(e){const t=_p(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){lp&&yh.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;vp(e).timestamp||(e.setStatus("cancelled"),e.end(t),lp&&yh.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=vp(e),s=n&&n<t,i=(this._finalTimeout+this._idleTimeout)/1e3,o=r&&n&&r-n<i;if(lp){const t=JSON.stringify(e,void 0,2);s?o||yh.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):yh.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return s&&o})),lp&&yh.log("[Tracing] flushing IdleTransaction")}else lp&&yh.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new rf(t,n,this.spanContext().spanId,e),lp&&yh.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=nf[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(lp&&yh.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=nf[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),lp&&yh.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,lp&&yh.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(lp&&yh.log(`[Tracing] popActivity ${e}`),delete this.activities[e],lp&&yh.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=ep();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=nf[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(lp&&yh.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=nf[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){lp&&yh.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function of(e,t,n){if(!zp(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Kp,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Kp,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Kp,Number(r))):(r=1,e.setAttribute(Kp,r)),af(r)?r?(e.sampled=Math.random()<r,e.sampled?(lp&&yh.log(`[Tracing] starting ${e.op} transaction - ${vp(e).description}`),e):(lp&&yh.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(lp&&yh.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(lp&&yh.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function af(e){return"number"==typeof(t=e)&&t!=t||"number"!=typeof e&&"boolean"!=typeof e?(lp&&yh.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(lp&&yh.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1);var t}function cf(){const e=this.getScope().getSpan();return e?{"sentry-trace":mp(e)}:{}}function uf(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",i=e.instrumenter||"sentry";s!==i&&(lp&&yh.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let o=new ef(e,this);return o=of(o,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function lf(e,t,n,r,s,i,o,a=!1){const c=e.getClient(),u=c&&c.getOptions()||{};let l=new sf(t,e,n,r,o,s,a);return l=of(l,u,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function df(){const e=$p();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=uf),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=cf),Bp())}function hf(e){return[{type:"span"},e]}const pf="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ff=ah;const gf=(e,t,n)=>{let r,s;return i=>{t.value>=0&&(i||n)&&(s=t.value-(r||0),(s||void 0===r)&&(r=t.value,t.delta=s,e(t)))}},mf=()=>ff.__WEB_VITALS_POLYFILL__?ff.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=ff.performance.timing,t=ff.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const r in e)"navigationStart"!==r&&"toJSON"!==r&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n})()):ff.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],_f=()=>{const e=mf();return e&&e.activationStart||0},yf=(e,t)=>{const n=mf();let r="navigate";return n&&(r=ff.document&&ff.document.prerendering||_f()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},vf=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(r){}},bf=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==ff.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};ff.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let wf=-1;const Sf=()=>(wf<0&&(ff.document&&ff.document.visibilityState&&(wf="hidden"!==ff.document.visibilityState||ff.document.prerendering?1/0:0),bf((({timeStamp:e})=>{wf=e}),!0)),{get firstHiddenTime(){return wf}});let xf=0,Tf=1/0,kf=0;const Ef=e=>{e.forEach((e=>{e.interactionId&&(Tf=Math.min(Tf,e.interactionId),kf=Math.max(kf,e.interactionId),xf=kf?(kf-Tf)/7+1:0)}))};let Of;const Cf=()=>{"interactionCount"in performance||Of||(Of=vf("event",Ef,{type:"event",buffered:!0,durationThreshold:0}))},Pf=()=>Of?xf:performance.interactionCount||0,Rf=[],If={},$f=e=>{const t=Rf[Rf.length-1],n=If[e.interactionId];if(n||Rf.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};If[t.id]=t,Rf.push(t)}Rf.sort(((e,t)=>t.latency-e.latency)),Rf.splice(10).forEach((e=>{delete If[e.id]}))}},Af=(e,t)=>{t=t||{},Cf();const n=yf("INP");let r;const s=e=>{e.forEach((e=>{if(e.interactionId&&$f(e),"first-input"===e.entryType){!Rf.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&$f(e)}}));const t=(()=>{const e=Math.min(Rf.length-1,Math.floor(Pf()/50));return Rf[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},i=vf("event",s,{durationThreshold:t.durationThreshold||40});r=gf(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),bf((()=>{s(i.takeRecords()),n.value<0&&Pf()>0&&(n.value=0,n.entries=[]),r(!0)})))},jf={},Df=e=>{ff.document&&(ff.document.prerendering?addEventListener("prerenderingchange",(()=>Df(e)),!0):"complete"!==ff.document.readyState?addEventListener("load",(()=>Df(e)),!0):setTimeout(e,0))},Nf={},Lf={};let Mf,Uf,Bf,qf,Ff;function Hf(e,t){return Xf(e,t),Lf[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);vf(e,(t=>{zf(e,{entries:t})}),t)}(e),Lf[e]=!0),Qf(e,t)}function zf(e,t){const n=Nf[e];if(n&&n.length)for(const s of n)try{s(t)}catch(r){pf&&yh.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Th(s)}\nError:`,r)}}function Wf(){return((e,t={})=>{const n=yf("CLS",0);let r,s=0,i=[];const o=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=i[0],o=i[i.length-1];s&&0!==i.length&&e.startTime-o.startTime<1e3&&e.startTime-t.startTime<5e3?(s+=e.value,i.push(e)):(s=e.value,i=[e]),s>n.value&&(n.value=s,n.entries=i,r&&r())}}))},a=vf("layout-shift",o);if(a){r=gf(e,n,t.reportAllChanges);const s=()=>{o(a.takeRecords()),r(!0)};return bf(s),s}})((e=>{zf("cls",{metric:e}),Mf=e}),{reportAllChanges:!0})}function Gf(){return(e=>{const t=Sf(),n=yf("FID");let r;const s=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},i=e=>{e.forEach(s)},o=vf("first-input",i);r=gf(e,n),o&&bf((()=>{i(o.takeRecords()),o.disconnect()}),!0)})((e=>{zf("fid",{metric:e}),Uf=e}))}function Jf(){return(e=>{const t=Sf(),n=yf("LCP");let r;const s=e=>{const s=e[e.length-1];if(s){const e=Math.max(s.startTime-_f(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[s],r())}},i=vf("largest-contentful-paint",s);if(i){r=gf(e,n);const t=()=>{jf[n.id]||(s(i.takeRecords()),i.disconnect(),jf[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{ff.document&&addEventListener(e,t,{once:!0,capture:!0})})),bf(t,!0),t}})((e=>{zf("lcp",{metric:e}),Bf=e}))}function Vf(){return((e,t)=>{t=t||{};const n=yf("TTFB"),r=gf(e,n,t.reportAllChanges);Df((()=>{const e=mf();if(e){if(n.value=Math.max(e.responseStart-_f(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))})((e=>{zf("ttfb",{metric:e}),qf=e}))}function Kf(){return Af((e=>{zf("inp",{metric:e}),Ff=e}))}function Yf(e,t,n,r,s=!1){let i;return Xf(e,t),Lf[e]||(i=n(),Lf[e]=!0),r&&t({metric:r}),Qf(e,t,s?i:void 0)}function Xf(e,t){Nf[e]=Nf[e]||[],Nf[e].push(t)}function Qf(e,t,n){return()=>{n&&n();const r=Nf[e];if(!r)return;const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}function Zf(e){return"number"==typeof e&&isFinite(e)}function eg(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function tg(e){return e/1e3}function ng(){return ff&&ff.addEventListener&&ff.performance}let rg,sg,ig=0,og={};function ag(){const e=ng();if(e&&tp){e.mark&&ff.performance.mark("sentry-tracing-init");const t=Yf("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=tg(tp),r=tg(t.startTime);pf&&yh.log("[Measurements] Adding FID"),og.fid={value:e.value,unit:"millisecond"},og["mark.fid"]={value:n+r,unit:"second"}}),Gf,Uf),n=function(e,t=!1){return Yf("cls",e,Wf,Mf,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(pf&&yh.log("[Measurements] Adding CLS"),og.cls={value:e.value,unit:""},sg=t)}),!0),r=function(e,t=!1){return Yf("lcp",e,Jf,Bf,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(pf&&yh.log("[Measurements] Adding LCP"),og.lcp={value:e.value,unit:"millisecond"},rg=t)}),!0),s=function(e){return Yf("ttfb",e,Vf,qf)}((({metric:e})=>{e.entries[e.entries.length-1]&&(pf&&yh.log("[Measurements] Adding TTFB"),og.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),s()}}return()=>{}}function cg(e,t){if(ng()&&tp){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==ug[e.name])),s=wp();if(!r||!s)return;const i=ug[r.name],o=s.getOptions(),a=tg(tp+r.startTime),c=tg(n.value),u=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===u)return;const{routeName:l,parentContext:d,activeTransaction:h,user:p,replayId:f}=u,g=void 0!==p?p.email||p.id||p.ip_address:void 0,m=void 0!==h?h.getProfileId():void 0,_=new Zp({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${i}`,name:dh(r.target),attributes:{release:o.release,environment:o.environment,transaction:l,...void 0!==g&&""!==g?{user:g}:{},...void 0!==m?{profile_id:m}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),y=function(e,t,n){if(!zp(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:ff.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,af(r)?!0===r?n:!1===r?0:r*n:(pf&&yh.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,o,t);if(y&&Math.random()<y){const e=_?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=function(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${o}`}(t)),function(e,t=[]){return[e,t]}(n,e.map(hf))}([_],s.getDsn()):void 0,t=s&&s.getTransport();t&&e&&t.send(e).then(null,(e=>{pf&&yh.error("Error while sending interaction:",e)}))}},Yf("inp",n,Kf,Ff);var n}(e,t);return()=>{n()}}return()=>{}}const ug={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function lg(e){const t=ng();if(!t||!ff.performance.getEntries||!tp)return;pf&&yh.log("[Tracing] Adding & adjusting spans using Performance API");const n=tg(tp),r=t.getEntries(),{op:s,start_timestamp:i}=vp(e);if(r.slice(ig).forEach((t=>{const r=tg(t.startTime),s=tg(t.duration);if(!("navigation"===e.op&&i&&n+r<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{dg(e,t,r,n)})),dg(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),dg(e,t,"fetch",n,"cache","domainLookupStart"),dg(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(eg(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+tg(t.requestStart),endTimestamp:n+tg(t.responseEnd)}),eg(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+tg(t.responseStart),endTimestamp:n+tg(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,s){const i=s+n,o=i+r;eg(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i})}(e,t,r,s,n);const i=Sf(),o=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&o&&(pf&&yh.log("[Measurements] Adding FP"),og.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&o&&(pf&&yh.log("[Measurements] Adding FCP"),og.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,s,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const o=Qh(n),a={};hg(a,t,"transferSize","http.response_transfer_size"),hg(a,t,"encodedBodySize","http.response_content_length"),hg(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop());o.host&&(a["server.address"]=o.host);a["url.same_origin"]=n.includes(ff.location.origin);const c=i+r,u=c+s;eg(e,{description:n.replace(ff.location.origin,""),endTimestamp:u,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(e,t,t.name,r,s,n)}})),ig=Math.max(r.length-1,0),function(e){const t=ff.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Zf(n.rtt)&&(og["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Zf(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);Zf(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===s){!function(e){const t=mf();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(pf&&yh.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(og),["fcp","fp","lcp"].forEach((e=>{if(!og[e]||!i||n>=i)return;const t=og[e].value,r=n+tg(t),s=Math.abs(1e3*(r-i)),o=s-t;pf&&yh.log(`[Measurements] Normalized ${e} from ${t} to ${s} (${o})`),og[e].value=s}));const t=og["mark.fid"];t&&og.fid&&(eg(e,{description:"first input delay",endTimestamp:t.value+tg(og.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete og["mark.fid"]),"fcp"in og||delete og.cls,Object.keys(og).forEach((e=>{!function(e,t,n){const r=Mp();r&&r.setMeasurement(e,t,n)}(e,og[e].value,og[e].unit)})),function(e){rg&&(pf&&yh.log("[Measurements] Adding LCP Data"),rg.element&&e.setTag("lcp.element",dh(rg.element)),rg.id&&e.setTag("lcp.id",rg.id),rg.url&&e.setTag("lcp.url",rg.url.trim().slice(0,200)),e.setTag("lcp.size",rg.size));sg&&sg.sources&&(pf&&yh.log("[Measurements] Adding CLS Data"),sg.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,dh(t.node)))))}(e)}rg=void 0,sg=void 0,og={}}function dg(e,t,n,r,s,i){const o=i?t[i]:t[`${n}End`],a=t[`${n}Start`];a&&o&&eg(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+tg(a),endTimestamp:r+tg(o)})}function hg(e,t,n,r){const s=t[n];null!=s&&s<2147483647&&(e[r]=s)}function pg(e,t,n,r,s="auto.http.browser"){if(!zp()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Hp(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const o=Sp(),a=wp(),{method:c,url:u}=e.fetchData,l=function(e){try{return new URL(e).href}catch(t){return}}(u),d=l?Qh(l).host:void 0,h=i?Wp({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[Xp]:s},op:"http.client"}):void 0;if(h&&(e.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,s){const i=s||n.getSpan(),o=Dp(),{traceId:a,spanId:c,sampled:u,dsc:l}={...o.getPropagationContext(),...n.getPropagationContext()},d=i?mp(i):up(a,c,u),h=ip(l||(i?kp(i):Tp(a,t,n))),p=r.headers||("undefined"!=typeof Request&&sh(e,Request)?e.headers:void 0);if(p){if("undefined"!=typeof Headers&&sh(p,Headers)){const e=new Headers(p);return e.append("sentry-trace",d),h&&e.append(np,h),e}if(Array.isArray(p)){const e=[...p,["sentry-trace",d]];return h&&e.push([np,h]),e}{const e="baggage"in p?p.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),h&&t.push(h),{...p,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:h}}(t,a,o,n,h)}return h}const fg=["localhost",/^\/(?!\/)/],gg={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:fg,tracePropagationTargets:fg};function mg(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o}={traceFetch:gg.traceFetch,traceXHR:gg.traceXHR,...e},a="function"==typeof i?i:e=>!0,c=e=>function(e,t){return function(e,t=[],n=!1){return t.some((t=>ih(e,t,n)))}(e,t||fg)}(e,r||s),u={};var l;t&&function(e){const t="fetch";Oh(t,e),Ch(t,jh)}((e=>{const t=pg(e,a,c,u);if(t){const n=vg(e.fetchData.url),r=n?Qh(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}o&&t&&_g(t)})),n&&(l=e=>{const t=function(e,t,n,r){const s=e.xhr,i=s&&s[Gh];if(!zp()||!s||s.__sentry_own_request__||!i)return;const o=t(i.url);if(e.endTimestamp&&o){const e=s.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==i.status_code&&(Hp(t,i.status_code),t.end(),delete r[e]))}const a=Sp(),c=Dp(),u=vg(i.url),l=u?Qh(u).host:void 0,d=o?Wp({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":u,url:i.url,"server.address":l,[Xp]:"auto.http.browser"},op:"http.client"}):void 0;d&&(s.__sentry_xhr_span_id__=d.spanContext().spanId,r[s.__sentry_xhr_span_id__]=d);const h=wp();if(s.setRequestHeader&&n(i.url)&&h){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(np,n)}catch(r){}}(s,d?mp(d):up(e,t,n),ip(r||(d?kp(d):Tp(e,h,a))))}return d}(e,a,c,u);o&&t&&_g(t)},Oh("xhr",l),Ch("xhr",Jh))}function _g(e){const{url:t}=vp(e).data||{};if(!t||"string"!=typeof t)return;const n=Hf("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){const t=function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const s of e){if("/"===s){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=s}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!tp)return r;return[...r,["http.request.redirect_start",yg(e.redirectStart)],["http.request.fetch_start",yg(e.fetchStart)],["http.request.domain_lookup_start",yg(e.domainLookupStart)],["http.request.domain_lookup_end",yg(e.domainLookupEnd)],["http.request.connect_start",yg(e.connectStart)],["http.request.secure_connection_start",yg(e.secureConnectionStart)],["http.request.connection_end",yg(e.connectEnd)],["http.request.request_start",yg(e.requestStart)],["http.request.response_start",yg(e.responseStart)],["http.request.response_end",yg(e.responseEnd)]]}(r);t.forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function yg(e=0){return((tp||performance.timeOrigin)+e)/1e3}function vg(e){try{return new URL(e,ff.location.origin).href}catch(t){return}}const bg={...tf,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!ff||!ff.location)return void(pf&&yh.warn("Could not initialize routing instrumentation due to invalid location"));let r,s=ff.location.href;t&&(r=e({name:ff.location.pathname,startTimestamp:tp?tp/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&function(e){const t="history";Oh(t,e),Ch(t,zh)}((({to:t,from:n})=>{void 0===n&&s&&-1!==s.indexOf(t)?s=void 0:n!==t&&(s=void 0,r&&(pf&&yh.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:ff.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...gg};function wg(e){const t=(n=`meta[name=${e}]`,lh.document&&lh.document.querySelector?lh.document.querySelector(n):null);var n;return t?t.getAttribute("content"):void 0}function Sg(e){const t=e.attributes&&e.attributes[Vp],n=e.data&&e.data[Vp],r=e.metadata&&e.metadata.source;return t||n||r}function xg(){const e=$p();if(!e.__SENTRY__)return;const t={mongodb:()=>new(Kh(module,"./node/integrations/mongo").Mongo),mongoose:()=>new(Kh(module,"./node/integrations/mongo").Mongo),mysql:()=>new(Kh(module,"./node/integrations/mysql").Mysql),pg:()=>new(Kh(module,"./node/integrations/postgres").Postgres)},n=Object.keys(t).filter((e=>!!function(e){let t;try{t=Kh(module,e)}catch(n){}try{const{cwd:n}=Kh(module,"process");t=Kh(module,`${n()}/node_modules/${e}`)}catch(n){}return t}(e))).map((e=>{try{return t[e]()}catch(n){return}})).filter((e=>e));n.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...n])}const Tg=class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,df(),pf&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...bg,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=ag(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&cg(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&Hf("longtask",(({entries:e})=>{for(const t of e){const e=Mp();if(!e)return;const n=tg(tp+t.startTime),r=tg(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}})),this.options._experiments.enableInteractions&&Hf("event",(({entries:e})=>{for(const t of e){const e=Mp();if(!e)return;if("click"===t.name){const n=tg(tp+t.startTime),r=tg(t.duration),s={description:dh(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},i=ph(t.target);i&&(s.attributes={"ui.component_name":i}),e.startChild(s)}}})),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:s,startTransactionOnLocationChange:i,startTransactionOnPageLoad:o,markBackgroundTransactions:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:h}=this.options,p=r&&r.tracePropagationTargets,f=p||this.options.tracePropagationTargets;pf&&this._hasSetTracePropagationTargets&&p&&yh.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),s((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),o,i),a&&(ff.document?ff.document.addEventListener("visibilitychange",(()=>{const e=Mp();if(ff.document.hidden&&e){const t="cancelled",{op:n,status:r}=vp(e);pf&&yh.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):pf&&yh.warn("[Tracing] Could not set up background tab detection due to lack of global document")),h.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),mg({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(pf&&yh.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:s,heartbeatInterval:i}=this.options,o="pageload"===e.op;let a;if(o){const t=o?wg("sentry-trace"):"",n=o?wg("baggage"):void 0,{traceId:r,dsc:s,parentSpanId:i,sampled:c}=cp(t,n);a={traceId:r,parentSpanId:i,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:s},trimEnd:!0}}else a={trimEnd:!0,...e};const c="function"==typeof n?n(a):a,u=void 0===c?{...a,sampled:!1}:c;u.metadata=u.name!==a.name?{...u.metadata,source:"custom"}:u.metadata,this._latestRoute.name=u.name,this._latestRoute.context=u,!1===u.sampled&&pf&&yh.log(`[Tracing] Will not send ${u.op} transaction because of beforeNavigate.`),pf&&yh.log(`[Tracing] Starting ${u.op} transaction on scope`);const{location:l}=ff,d=lf(t,u,r,s,!0,{location:l},i,o);return o&&ff.document&&(ff.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ff.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(ff.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),lg(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,s="ui.action.click",i=Mp();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(pf&&yh.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(pf&&yh.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(pf&&yh.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const o=this._getCurrentHub(),{location:a}=ff,c={name:this._latestRoute.name,op:s,trimEnd:!0,data:{[Vp]:this._latestRoute.context?Sg(this._latestRoute.context):"url"}};e=lf(o,c,t,n,!0,{location:a},r)};["click"].forEach((e=>{ff.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=wp(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,s=Mp(),i=Sp(),o=void 0!==i?i.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],i=e.duration,a=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),u=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===i&&e.startTime===a)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,i);else if(c.length<10||void 0===u||i>this._interactionIdToRouteNameMapping[u].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(u&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[u],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:i,parentContext:n,user:o,activeTransaction:s,replayId:r,startTime:a})}}}))};Hf("event",e),Hf("first-input",e)}};("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(df(),Vh()&&xg());var kg=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};const Eg=n({__proto__:null,default:s(kg)},[kg]);export{Re as A,bn as B,aa as C,ea as D,ta as E,na as F,ra as G,sa as H,ia as I,oa as J,Zo as K,vl as L,Hu as M,Qd as N,en as O,ht as P,gt as Q,Wi as R,pa as S,_a as T,Tg as U,nn as _,ue as a,Ee as b,ce as c,Oe as d,Ce as e,Ae as f,s as g,nt as h,de as i,rt as j,st as k,et as l,Be as m,ct as n,$e as o,Me as p,Le as q,le as r,Se as s,ln as t,xe as u,cn as v,tn as w,pn as x,rn as y,hn as z};
